{"version":3,"sources":["components/burger-ingredients-list/burger-ingredients-list.module.css","components/tabs/tabs.module.css","components/burger-item/burger-item.module.css","components/total-cost/total-cost.module.css","components/modal-overlay/modal-overlay.module.css","components/order-history/order-history.module.css","components/feed-item-check/feed-item-check.module.css","reportWebVitals.ts","components/app-header/app-header.tsx","utils/hooks.ts","components/burger-ingredient/burger-ingredient.tsx","components/burger-ingredients-list/burger-ingredients-list.tsx","components/tabs/tabs.tsx","utils/functions.ts","components/burger-ingredients/burger-ingredients.tsx","image/done.png","components/order-details/order-details.tsx","services/actions/ingredients/action-type-ingredients.ts","utils/constants.ts","utils/api.ts","services/actions/order/action-creator-order.ts","services/actions/order/action-type-order.ts","services/actions/order/order.ts","services/actions/modal/action-type-modal.ts","components/burger-item/burger-item.tsx","components/total-cost/total-cost.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/burger-constructor/burger-constructor.tsx","pages/main/main.tsx","services/actions/user/action-creator-user.ts","services/actions/user/action-type-user.ts","services/actions/user/user.ts","pages/login/login.tsx","pages/register/register.tsx","services/actions/password/action-creator-password.ts","services/actions/password/action-type-password.ts","services/actions/password/password.ts","pages/reset-password/reset-password.tsx","pages/forgot-password/forgot-password.tsx","components/feed-item-check/feed-item-true.tsx","components/feed-item-check/feed-item-check.tsx","services/actions/auth-socket-actions.ts","components/order-history/order-history.tsx","components/form-user/form-user.tsx","pages/order/order.tsx","pages/profile/profile.tsx","components/protected-route/protected-route.tsx","components/ingredient-details/ingredient-details.tsx","components/feed-orders-table/feed-orders-table.tsx","services/actions/socket-actions.ts","pages/feed/feed.tsx","services/actions/ingredients/action-creator-ingredients.ts","services/actions/ingredients/ingredients.ts","components/app/app.tsx","services/initial-state/state-ingredients.ts","services/initial-state/state-modal.ts","services/initial-state/state-order.ts","services/initial-state/state-password.ts","services/initial-state/state-user.ts","services/initial-state/state-socket.ts","services/initial-state/state-auth-socket.ts","services/reducers/root-reducer.ts","services/reducers/ingredients.ts","services/reducers/order.ts","services/reducers/modal.ts","services/reducers/password.ts","services/reducers/user.ts","services/reducers/socket-reducer.ts","services/reducers/auth-socket-reducer.ts","services/socketMiddleware.ts","services/store.ts","index.jsx","pages/order/order.module.css","components/app-header/app-header.module.css","components/feed-orders-table/feed-orders-table.module.css","components/burger-constructor/burger-constructor.module.css","components/ingredient-details/ingredient-details.module.css","pages/login/login.module.css","pages/profile/profile.module.css","pages/main/main.module.css","pages/register/register.module.css","pages/reset-password/reset-password.module.css","pages/forgot-password/forgot-password.module.css","components/burger-ingredient/burger-ingredient.module.css","components/form-user/form-user.module.css","pages/feed/feed.module.css","components/burger-ingredients/burger-ingredients.module.css","components/order-details/order-details.module.css","components/modal/modal.module.css"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","AppHeader","pathname","useLocation","iconBurger","iconProfile","iconFeed","className","styles","content","twoA","firstCont","type","to","exact","activeClassName","linkActive","secondCont","logo","thirdCont","thirdA","useDispatch","dispatchHook","useSelector","selectorHook","BurgerIngredient","item","id","store","ingredients","burgerIngredients","counts","bun","count","_id","useDrag","drag","card","ref","image","src","image_large","alt","name","size","price","BurgerIngredientsList","React","forwardRef","array","title","location","list","map","state","background","Tabs","onClick","tab","value","active","calculationTotalCost","notBun","reduce","res","el","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","props","exp","path","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","statusColor","status","text","textColor","getBurgerPrice","acc","curr","orderDate","date","dayCreated","today","setHours","days","diffTime","Math","ceil","hours","getHours","min","getMinutes","getTimezoneOffset","getIngredientsOrder","order","allIngredients","filter","BurgerIngredients","allIngredientsArray","useState","setType","useEffect","scrollElement","querySelector","scrollIntoView","rootRef","useRef","bunRef","sauceRef","mainRef","container","containerIngredients","onScroll","bunType","abs","current","getBoundingClientRect","top","sauceType","mainType","minType","currentType","sauce","main","OrderDetails","orderRequest","orderFailed","createOrder","number","Image","GET_ITEMS_REQUEST","GET_ITEMS_SUCCESS","INCREASE_ITEM","DECREASE_ITEM","DELETE_ITEM","ADD_ITEM","UPDATE_CONSTRUCTOR","CLEAR_CONSTRUCTOR","apiNorma","PropTypes","shape","string","isRequired","proteins","fat","carbohydrates","calories","image_mobile","__v","url","headers","Accept","request","ok","json","Promise","reject","fetchWithRefreshToken","options","fetch","catch","err","console","log","refreshTokenRequest","localStorage","setItem","refreshToken","accessToken","split","Authorization","removeItem","reload","method","mode","cache","credentials","body","JSON","stringify","token","getItem","CREATE_ORDER_FAILED","GET_ORDERS_FAILED","GET_USER_ORDERS_FAILED","createOrderFailed","getOrdersFailedAction","getUserOrdersFailedAction","CREATE_ORDER_REQUEST","CREATE_ORDER_SUCCESS","GET_ORDERS_REQUEST","GET_ORDERS_SUCCESS","GET_USER_ORDERS_REQUEST","GET_USER_ORDERS_SUCCESS","ingredients_id","dispatch","redirect","referrerPolicy","success","getOrders","feedOrders","orders","getUserOrders","OPEN_MODAL","CLOSE_MODAL","BurgerItem","index","deleteIngredient","moveItem","useDrop","accept","collect","monitor","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","drop","isDrag","isDragging","opacity","style","thumbnail","handleClose","TotalCost","ModalOverlay","children","onCloseGoBack","overlay","Modal","history","useHistory","modal","visible","callback","goBack","handleEsc","e","key","window","addEventListener","removeEventListener","ReactDOM","createPortal","close","getElementById","BurgerConstructor","handlerDrop","isAuth","user","useCallback","isHover","isOver","canDrop","length","overflowY","classStyle","classForNotBun","classStyles","emptyContainer","isLocked","i","productId","typeItem","Main","isLoading","hasError","loaded","DndProvider","backend","HTML5Backend","uuidv4","LOGIN_FAILED","LOGOUT_FAILED","REGISTER_FAILED","GET_USER_FAILED","REFRESH_TOKEN_FAILED","UPDATE_USER_FAILED","redisterFailed","logoutFailed","loginFailed","updateUserFailed","LOGIN_REQUEST","LOGIN_SUCCESS","LOGOUT_REQUEST","LOGOUT_SUCCESS","REGISTER_REQUEST","REGISTER_SUCCESS","GET_USER_REQUEST","GET_USER_SUCCESS","REFRESH_TOKEN_REQUEST","REFRESH_TOKEN_SUCCESS","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","register","email","password","signUpRequest","data","authToken","login","signInRequest","logout","getUser","updateUser","updateUserRequest","Login","setState","onChangeInput","target","from","onSubmit","preventDefault","form","onChange","link_container","link","Register","placeholder","error","errorText","icon","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_FAILED","forgotPasswordFailed","resetPasswordFailed","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","forgotPassword","forgotPasswordRequest","resetPassword","resetPasswordRequest","ResetPassword","onIconClick","ForgotPassword","hasForgotPasswordRequest","setEmailValue","FeedItemTrue","orderIngredients","bunItem","find","notBunItems","notBunItemsLast","notBunItemsMax","slice","zIndex","burgerPrice","createdAt","st","li","number_order","name_and_status","pictures","images","div_image","right","last_img","counter","FeedItemCheck","hasBun","hasOtherIngredient","ingredient","checkIngredients","AUTH_SOCKET_CREATE","AUTH_SOCKET_SUCCESS","AUTH_SOCKET_ERROR","AUTH_SOCKET_CLOSED","AUTH_SOCKET_CLOSE","AUTH_SOCKET_GET_MESSAGE","authSocketAllActions","socketCreate","socketClose","socketSendMessage","onOpen","onClose","onError","onGetMessage","OrderHistory","authSocket","FormUser","hasName","hasEmail","hasState","newDataUser","buttons","button","Order","isProfile","useRouteMatch","useParams","arr","ingredientsSet","Array","Set","objIngredientsWithCount","info","element_price","Profile","margin","justifyContent","links","height","p","ProtectedRoute","onlyUnAuth","rest","IngredientDetails","burger","setBurger","img","compound","cal","FeedOrdersTable","doneArray","pendingArray","socket","total","totalToday","colorStyle","color","table","list_status","SOCKET_CREATE","SOCKET_SUCCESS","SOCKET_ERROR","SOCKET_CLOSED","SOCKET_CLOSE","SOCKET_GET_MESSAGE","socketAllActions","Feed","statusArray","done","pending","GET_ITEMS_FAILED","getItemsFailed","getIngredients","items","ModalSwitch","hasToken","App","basename","stateIngredients","stateModal","stateOrder","currentBurger","ordersLoaded","statePassword","stateUser","isTokenUpdated","tokenUpdateDate","registerRequest","registerFailed","loginRequest","logoutRequest","getUserRequest","getUserFailed","stateSocket","isConnected","stateAuthSocket","rootReducer","combineReducers","action","newItem","dragNotBun","splice","payload","socketMiddleware","wsUrl","socketActions","auth","connected","next","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","code","setTimeout","message","send","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","render","StrictMode"],"mappings":"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","file":"static/js/main.40b05618.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"burger-ingredients-list_list__23luN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tab\":\"tabs_tab__2I7zc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-item_item__1EQ0H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"total-cost_container__2t6oB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__2wVdV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-history_container__FEsq8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"li\":\"feed-item-check_li__1xYVL\",\"number_order\":\"feed-item-check_number_order__1pd2t\",\"name_and_status\":\"feed-item-check_name_and_status__1Zu7u\",\"pictures\":\"feed-item-check_pictures__1yQ8O\",\"images\":\"feed-item-check_images__2y5hO\",\"div_image\":\"feed-item-check_div_image__jmGsX\",\"image\":\"feed-item-check_image__3azxA\",\"last_img\":\"feed-item-check_last_img__3vwso\",\"notBun\":\"feed-item-check_notBun__166hH\",\"price\":\"feed-item-check_price__2KmR2\",\"status_color_yellow\":\"feed-item-check_status_color_yellow__38Z1Z\",\"status_color_white\":\"feed-item-check_status_color_white__2VKNB\",\"status_color_green\":\"feed-item-check_status_color_green__2D17i\",\"counter\":\"feed-item-check_counter__1yb7p\",\"false_item\":\"feed-item-check_false_item__3Xlf9\"};","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  Logo,\r\n  ProfileIcon\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./app-header.module.css\";\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\n\r\nexport const AppHeader = () => {\r\n  const { pathname } = useLocation();\r\n\r\n  const iconBurger = pathname === \"/\" ? \"primary\" : \"secondary\";\r\n  const iconProfile = pathname === \"/profile\" ? \"primary\" : \"secondary\";\r\n  const iconFeed = pathname === \"/feed\" ? \"primary\" : \"secondary\";\r\n\r\n  return (\r\n    <header>\r\n      <nav className={styles.content}>\r\n        <div className={styles.twoA}>\r\n          <div className={styles.firstCont}>\r\n            <BurgerIcon type={iconBurger} />\r\n            <NavLink\r\n              to='/'\r\n              exact\r\n              className={` text text_type_main-default text_color_inactive ml-2`}\r\n              activeClassName={styles.linkActive}\r\n            >\r\n              Конструктор\r\n            </NavLink>\r\n          </div>\r\n\r\n          <div className={styles.secondCont}>\r\n            <ListIcon type={iconFeed} />\r\n            <NavLink\r\n              to='/feed'\r\n              className={` text text_type_main-default text_color_inactive ml-2`}\r\n              activeClassName={styles.linkActive}\r\n            >\r\n              Лента заказов\r\n            </NavLink>\r\n          </div>\r\n        </div>\r\n\r\n        <NavLink\r\n          to='/'\r\n          className={styles.logo}\r\n        >\r\n          <Logo />\r\n        </NavLink>\r\n\r\n        <div className={styles.thirdCont}>\r\n          <ProfileIcon type={iconProfile} />\r\n          <NavLink\r\n            to='/profile'\r\n            className={`${styles.thirdA} text text_type_main-default text_color_inactive ml-2`}\r\n            activeClassName={styles.linkActive}\r\n          >\r\n            Личный кабинет\r\n          </NavLink>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook,\r\n} from 'react-redux';\r\nimport {\r\n  TDispatch,\r\n  TThunk,\r\n  RootState,\r\n} from '../types';\r\n\r\nexport const useDispatch = () => dispatchHook<TDispatch | TThunk>();\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\n","import { FC } from 'react';\r\nimport {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-ingredient.module.css';\r\nimport { useDrag } from 'react-dnd';\r\nimport { TIngredient } from '../../types';\r\nimport { useSelector } from '../../utils/hooks';\r\n\r\ntype TProps = {\r\n  item: TIngredient,\r\n  id: string,\r\n};\r\n\r\nexport const BurgerIngredient: FC<TProps> = ({ item, id }) => {\r\n  const { counts, bun } = useSelector((store) => store.ingredients.burgerIngredients);\r\n\r\n  const isBun = id === 'bun';\r\n\r\n  const count = (isBun && bun) && bun._id === item._id ? 2 : counts[item._id];\r\n\r\n  const [, drag] = useDrag({\r\n    type: 'ingredient',\r\n    item: () => { return item }\r\n  });\r\n  \r\n  return (\r\n    <li className={styles.card} ref={drag} data-cy=\"ingredient\">\r\n      <img className={`${styles.image} mb-1`} src={item.image_large} alt={item.name} />\r\n      {count ?\r\n        <Counter count={count} size='small' /> : null\r\n      }\r\n      <div className={`${styles.price} text_type_digits-default text`}>\r\n        <div className='mr-2'>{item.price}</div>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n      <p className={`text text_type_main-default`}>{item.name}</p>\r\n    </li>\r\n  )\r\n};\r\n","import React from 'react';\r\nimport styles from './burger-ingredients-list.module.css';\r\nimport { BurgerIngredient } from '../burger-ingredient/burger-ingredient';\r\nimport { Link, useLocation, } from \"react-router-dom\";\r\nimport { TIngredient } from '../../types';\r\n\r\ntype TProps = {\r\n  array: Array<TIngredient>,\r\n  title: string,\r\n  id: string,\r\n};\r\n\r\nexport const BurgerIngredientsList = React.forwardRef<HTMLParagraphElement, TProps>(({ array, title, id }, ref) => {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <div className={'mb-10'} >\r\n      <p id={id} ref={ref} className={` text_type_main-medium mb-6`}>{title}</p>\r\n      <ul className={styles.list} >\r\n        {array.map((item: TIngredient) =>\r\n          <Link\r\n            key={item._id}\r\n            to={{\r\n              pathname: `/ingredients/${item._id}`,\r\n              state: { background: location }\r\n            }}\r\n          >\r\n            <BurgerIngredient\r\n              item={item}\r\n              id={id}\r\n            />\r\n          </Link>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  )\r\n});\r\n","import { FC } from 'react';\r\nimport styles from \"./tabs.module.css\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ntype TProps = {\r\n  type: string,\r\n  onClick: (type: string) => void\r\n}\r\n\r\nexport const Tabs: FC<TProps> = ({ type, onClick }) => {\r\n  return (\r\n    <div className={`text_type_main-default mb-10 ${styles.tab}`}>\r\n      <Tab value='bun' active={type === 'bun'} onClick={onClick}>\r\n        Булки\r\n      </Tab>\r\n      <Tab value='sauces' active={type === 'sauces'} onClick={onClick}>\r\n        Соусы\r\n      </Tab>\r\n      <Tab value='main' active={type === 'main'} onClick={onClick}>\r\n        Начинки\r\n      </Tab>\r\n    </div>\r\n  )\r\n};\r\n","import { \r\n  TGetIngredientsObjWithCount, \r\n  TIngredient, \r\n  TOrder,\r\n } from \"../types\";\r\n\r\ntype TPropsSetCookie = {\r\n  expires?: number | string;\r\n  path?: string;\r\n} & { [extraParams: string]: string | number | boolean; }\r\n\r\nexport const filterArray = (array: Array<TIngredient>): { [name: string]: Array<TIngredient> } => {\r\n  const allIngredients = array.reduce(\r\n    (acc: { [name: string]: Array<TIngredient> }, curr) =>\r\n    ({\r\n      ...acc,\r\n      [curr.type]: [...acc[curr.type] || [], curr]\r\n    }),\r\n    {}\r\n  );\r\n  return allIngredients\r\n};\r\n\r\nexport const calculationTotalCost = (bun: TIngredient, notBun: Array<TIngredient>) => {\r\n  const bunPrice = bun ? bun.price : 0;\r\n\r\n  return bunPrice * 2 + notBun.reduce((res, el) => res += el.price, 0)\r\n};\r\n\r\nexport function getCookie(name: string): string | undefined {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\"(?:^|; )\" +\r\n        // eslint-disable-next-line no-useless-escape\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\")\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport function setCookie(\r\n  name: string,\r\n  value: string,\r\n  props: { [key: string]: string | number | Date | boolean } = {}\r\n) {\r\n  props = {\r\n    path: \"/\",\r\n    ...props,\r\n  };\r\n\r\n  let exp = props.expires;\r\n  if (exp && typeof exp === \"number\") {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  };\r\n\r\n  if (exp && exp instanceof Date) {\r\n    props.expires = exp.toUTCString();\r\n  };\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n};\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, \"\", { expires: -1 });\r\n};\r\n\r\nexport const filterOrdersByStatus = (arr: Array<TOrder>) => {\r\n  return arr?.reduce((acc: { [name: string]: Array<TOrder> }, curr) => {\r\n    curr.status === 'done' ? acc['done'] = [...acc['done'], curr] : acc['pending'] = [...acc['pending'], curr]\r\n    return acc;\r\n  }, { done: [], pending: [] })\r\n};\r\n\r\nexport const statusColor = (status: string) =>\r\n  status === 'done'\r\n    ? { text: 'Выполнен', textColor: 'green' }\r\n    : status === 'pending'\r\n      ? { text: 'Отменен', textColor: 'yellow' }\r\n      : { text: 'Готовится', textColor: 'white' };\r\n\r\n//найти текущий заказ\r\nexport const filterOrders = (arr: Array<TOrder>, id: string) => {\r\n  return arr?.filter((el: TOrder) => el.number === Number(id))[0]\r\n};\r\n\r\n//получить стоимость бургера\r\nexport const getBurgerPrice = (array: Array<TIngredient> | undefined) =>\r\n  array?.reduce((acc, curr) => acc += curr?.price, 0);\r\n\r\n\r\n//получить дату создания заказа\r\nconst getDaysForCard = (days: number) => (\r\n  days === 0 ? 'Сегодня'\r\n    : days === 1 ? 'Вчера'\r\n      : days > 1 ? `${days} дня(-ей) назад`\r\n        : 'Что-то пошло не так:(');\r\n\r\n//форматировать дату\r\nexport const orderDate = (date: string) => {\r\n  const dayCreated: Date = new Date(date);\r\n  const today: Date = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  const diffTime: number = Math.ceil((today.getTime() - dayCreated.getTime()) / (60 * 60 * 24 * 1000));\r\n  const hours = dayCreated.getHours() > 9 ? dayCreated.getHours() : `0${dayCreated.getHours()}`\r\n  const min = dayCreated.getMinutes() > 9 ? dayCreated.getMinutes() : `0${dayCreated.getMinutes()}`\r\n\r\n  return `${getDaysForCard(diffTime)}, ${hours}:${min} i-GMT+${dayCreated.getTimezoneOffset() * (-1) / 60}`;\r\n};\r\n\r\n//получить объект со счетчиком ингредиентов и ингредиентами\r\nexport const getIngredientsObjWithCount = (arr: Array<TIngredient>) =>\r\n  arr?.reduce(\r\n    (acc: TGetIngredientsObjWithCount, curr: TIngredient) => {\r\n      const id = curr._id;\r\n      acc.item[id] = curr;\r\n      acc.count[id] = (acc.count[id] || 0) + 1;\r\n      return acc;\r\n    },\r\n    { item: {}, count: {} }\r\n  );\r\n\r\nexport const getIngredientsOrder = (order: TOrder, allIngredients: Array<TIngredient>) =>\r\n  order.ingredients.map(\r\n    (el) => {\r\n      const item = allIngredients.filter(\r\n        (order: TIngredient) =>\r\n          order._id === el\r\n      )\r\n      return item[0];\r\n    }\r\n  );","import {\r\n  useState,\r\n  useRef,\r\n  useEffect\r\n} from \"react\";\r\nimport styles from \"./burger-ingredients.module.css\";\r\nimport { BurgerIngredientsList } from \"../burger-ingredients-list/burger-ingredients-list\";\r\nimport { Tabs } from \"../tabs/tabs\";\r\nimport { filterArray } from \"../../utils/functions\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const BurgerIngredients = () => {\r\n\r\n  const { allIngredients } = useSelector((store) => store.ingredients);\r\n\r\n  const allIngredientsArray = filterArray(allIngredients);\r\n\r\n  const [type, setType] = useState('bun');\r\n\r\n  useEffect(() => {\r\n    const scrollElement = document.querySelector(`#${type}`);\r\n    if (scrollElement !== null) {\r\n      scrollElement.scrollIntoView();\r\n    }\r\n  }, [type]);\r\n\r\n  const rootRef = useRef<HTMLElement>(null);\r\n  const bunRef = useRef<HTMLParagraphElement>(null);\r\n  const sauceRef = useRef<HTMLParagraphElement>(null);\r\n  const mainRef = useRef<HTMLParagraphElement>(null);\r\n\r\n  const handlerScroll = () => {\r\n    const bunType = Math.abs(rootRef.current!.getBoundingClientRect().top - bunRef.current!.getBoundingClientRect().top);\r\n    const sauceType = Math.abs(rootRef.current!.getBoundingClientRect().top - sauceRef.current!.getBoundingClientRect().top);\r\n    const mainType = Math.abs(rootRef.current!.getBoundingClientRect().top - mainRef.current!.getBoundingClientRect().top);\r\n    const minType = Math.min(bunType, sauceType, mainType);\r\n    const currentType = minType === bunType ? 'bun' : minType === sauceType ? 'sauces' : 'main';\r\n    setType(type => currentType === type ? type : currentType);\r\n  };\r\n\r\n  return (\r\n    <section className={styles.container}>\r\n      <h1 className={`text_type_main-large mb-5`} >Соберите бургер</h1>\r\n      <Tabs type={type} onClick={setType} />\r\n\r\n      <section className={styles.containerIngredients} ref={rootRef} onScroll={handlerScroll}>\r\n        <BurgerIngredientsList title='Булки' array={allIngredientsArray.bun} id=\"bun\" ref={bunRef} />\r\n        <BurgerIngredientsList title='Соусы' array={allIngredientsArray.sauce} id='sauces' ref={sauceRef} />\r\n        <BurgerIngredientsList title='Начинки' array={allIngredientsArray.main} id='main' ref={mainRef} />\r\n      </section>\r\n    </section>\r\n  )\r\n};\r\n","export default __webpack_public_path__ + \"static/media/done.e036971b.png\";","import styles from \"./order-details.module.css\";\r\nimport Image from \"../../image/done.png\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\nexport const OrderDetails = () => {\r\n  const {\r\n    orderRequest,\r\n    orderFailed,\r\n    createOrder\r\n  } = useSelector((store) => store.order);\r\n\r\n  return (\r\n    <>\r\n      {orderRequest && 'Загрузка...'}\r\n      {orderFailed && 'Произошла ошибка'}\r\n      {!orderRequest && !orderFailed &&\r\n        <div className={`${styles.content} pt-5 pb-10`}>\r\n          <p className=\"text text_type_digits-large\">{createOrder?.order.number}</p>\r\n          <p className=\"text text_type_main-medium\">Идентификатор заказа</p>\r\n          <div className={`${styles.image} pb-15 pt-15`}>\r\n            <img src={Image} alt='Иконка' />\r\n          </div>\r\n          <p className=\"text text_type_main-default pb-2\">Ваш заказ начали готовить</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">\r\n            Дождитесь готовности на орбитальной станции\r\n          </p>\r\n        </div>\r\n      }\r\n    </>\r\n  );\r\n};\r\n","import { \r\n  TIngredient, \r\n  TIngredientWithProductId,\r\n } from \"../../../types\";\r\nimport { IGetItemsFailedAction } from \"./action-creator-ingredients\";\r\n\r\nexport const GET_ITEMS_REQUEST: 'GET_ITEMS_REQUEST' = 'GET_ITEMS_REQUEST';\r\nexport const GET_ITEMS_SUCCESS: 'GET_ITEMS_SUCCESS' = 'GET_ITEMS_SUCCESS';\r\n\r\nexport const INCREASE_ITEM: 'INCREASE_ITEM' = 'INCREASE_ITEM';\r\nexport const DECREASE_ITEM: 'DECREASE_ITEM' = 'DECREASE_ITEM';\r\nexport const DELETE_ITEM: 'DELETE_ITEM' = 'DELETE_ITEM';\r\nexport const ADD_ITEM: 'ADD_ITEM' = 'ADD_ITEM';\r\nexport const UPDATE_CONSTRUCTOR: 'UPDATE_CONSTRUCTOR' = 'UPDATE_CONSTRUCTOR';\r\nexport const CLEAR_CONSTRUCTOR: 'CLEAR_CONSTRUCTOR' = 'CLEAR_CONSTRUCTOR';\r\n\r\nexport const TAB_SWITCH: 'TAB_SWITCH' = 'TAB_SWITCH';\r\n\r\nexport interface IGetItemsRequestAction {\r\n  readonly type: typeof GET_ITEMS_REQUEST;\r\n}\r\n\r\nexport interface IGetItemsSuccessAction {\r\n  readonly type: typeof GET_ITEMS_SUCCESS;\r\n  readonly items: Array<TIngredient>;\r\n}\r\n\r\nexport interface IIncreaseItemAction {\r\n  readonly type: typeof INCREASE_ITEM;\r\n  readonly key: string;\r\n  readonly typeItem: string;\r\n}\r\n\r\nexport interface IDecreaseItemAction {\r\n  readonly type: typeof DECREASE_ITEM;\r\n  readonly key: string;\r\n  readonly typeItem: string;\r\n}\r\n\r\nexport interface IDeleteItemAction {\r\n  readonly type: typeof DELETE_ITEM;\r\n  readonly id: string;\r\n}\r\n\r\nexport interface IAddItemAction {\r\n  readonly type: typeof ADD_ITEM;\r\n  readonly item: TIngredientWithProductId;\r\n  readonly key: string;\r\n}\r\n\r\nexport interface IUpdateConstructorAction {\r\n  readonly type: typeof UPDATE_CONSTRUCTOR;\r\n  readonly dragIndex: number;\r\n  readonly hoverIndex: number;\r\n}\r\n\r\nexport interface IClearConstructorAction {\r\n  readonly type: typeof CLEAR_CONSTRUCTOR;\r\n}\r\n\r\nexport interface ITabSwitchAction {\r\n  readonly type: typeof TAB_SWITCH;\r\n}\r\n\r\nexport type TIngredientsActions =\r\n  | IGetItemsRequestAction\r\n  | IGetItemsSuccessAction\r\n  | IGetItemsFailedAction\r\n  | IIncreaseItemAction\r\n  | IDecreaseItemAction\r\n  | IDeleteItemAction\r\n  | IAddItemAction\r\n  | IUpdateConstructorAction\r\n  | IClearConstructorAction\r\n  | ITabSwitchAction;\r\n","import PropTypes from \"prop-types\";\r\n\r\nexport const menuItemPropTypes = PropTypes.shape({\r\n  _id: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  type: PropTypes.string.isRequired,\r\n  proteins: PropTypes.number.isRequired,\r\n  fat: PropTypes.number.isRequired,\r\n  carbohydrates: PropTypes.number.isRequired,\r\n  calories: PropTypes.number.isRequired,\r\n  price: PropTypes.number.isRequired,\r\n  image: PropTypes.string.isRequired,\r\n  image_mobile: PropTypes.string.isRequired,\r\n  image_large: PropTypes.string.isRequired,\r\n  __v: PropTypes.number.isRequired,\r\n});\r\n\r\nexport const apiNorma = {\r\n  url: 'https://norma.nomoreparties.space/api',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    Accept: \"application/json\"\r\n  },\r\n};\r\n\r\nexport const SOCKET_URL = 'wss://norma.nomoreparties.space/orders/all';\r\nexport const SOCKET_URL_USER = 'wss://norma.nomoreparties.space/orders';","import { apiNorma } from \"./constants\";\r\nimport { \r\n  deleteCookie, \r\n  getCookie, \r\n  setCookie,\r\n } from \"./functions\";\r\n\r\nconst request = (res: Response) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(res.status)\r\n};\r\n\r\nexport const getProductsRequest = () => {\r\n  return fetch(`${apiNorma.url}/ingredients`, {\r\n    method: 'GET',\r\n    headers: apiNorma.headers,\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\nconst fetchWithRefreshToken = (url: string, options: RequestInit) => {\r\n  return fetch(url, options)\r\n    .catch((res: Response) => {\r\n      return res.json()\r\n        .then((err) => {\r\n          console.log(err)\r\n          if (err === 403) {\r\n            return refreshTokenRequest()\r\n              .then(res => {\r\n                localStorage.setItem('refreshToken', res.refreshToken);\r\n                const authToken = res.accessToken.split('Bearer ')[1];\r\n                setCookie('token', authToken);\r\n                (options.headers as { [key: string]: string }).Authorization = res.accessToken\r\n                return fetch(url, options).then((res) => request(res));\r\n              })\r\n          } else {\r\n            deleteCookie('token');\r\n            localStorage.removeItem('refreshToken');\r\n            // eslint-disable-next-line\r\n            location.reload();\r\n            return Promise.reject(err)\r\n          };\r\n        })\r\n    })\r\n};\r\n\r\nexport const addOrderRequest = (ingredients: Array<string>) => {\r\n  return fetchWithRefreshToken(`${apiNorma.url}/orders`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      ...apiNorma.headers,\r\n      Authorization: 'Bearer ' + getCookie('token'),\r\n    },\r\n    body: JSON.stringify(\r\n      { ingredients }\r\n    ),\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//регистрация\r\nexport const signUpRequest = (state: { name: string, email: string, password: string }) => {\r\n  return fetch(`${apiNorma.url}/auth/register`, {\r\n    method: 'POST',\r\n    headers: apiNorma.headers,\r\n    body: JSON.stringify(\r\n      {\r\n        email: state.email,\r\n        password: state.password,\r\n        name: state.name,\r\n      }\r\n    ),\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//вход\r\nexport const signInRequest = (state: { email: string, password: string }) => {\r\n  return fetch(`${apiNorma.url}/auth/login`, {\r\n    method: 'POST',\r\n    headers: apiNorma.headers,\r\n    body: JSON.stringify(\r\n      {\r\n        email: state.email,\r\n        password: state.password,\r\n      }\r\n    ),\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//выход\r\nexport const signOutRequest = () => {\r\n  return fetch(`${apiNorma.url}/auth/logout`, {\r\n    method: 'POST',\r\n    headers: apiNorma.headers,\r\n    body: JSON.stringify(\r\n      { token: localStorage.getItem('refreshToken') }\r\n    ),\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//получение данных о пользователе\r\nexport const getUserRequest = () => {\r\n  return fetchWithRefreshToken(`${apiNorma.url}/auth/user`, {\r\n    method: 'GET',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      ...apiNorma.headers,\r\n      Authorization: 'Bearer ' + getCookie('token'),\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n  .then((res) => request(res))\r\n};\r\n\r\n\r\n\r\n//обновление токена\r\nexport const refreshTokenRequest = () => {\r\n  return fetch(`${apiNorma.url}/auth/token`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: apiNorma.headers,\r\n    body: JSON.stringify(\r\n      { token: localStorage.getItem('refreshToken') }\r\n    ),\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//изменение данных пользователя\r\nexport const updateUserRequest = (state: { name: string, email: string, password: string }) => {\r\n  return fetchWithRefreshToken(`${apiNorma.url}/auth/user`, {\r\n    method: 'PATCH',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      ...apiNorma.headers,\r\n      Authorization: 'Bearer ' + getCookie('token'),\r\n    },\r\n    body: JSON.stringify(\r\n      {\r\n        email: state.email,\r\n        password: state.password,\r\n        name: state.name,\r\n      }\r\n    ),\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//восстановление пароля\r\nexport const forgotPasswordRequest = (email: string) => {\r\n  return fetch(`${apiNorma.url}/password-reset`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: apiNorma.headers,\r\n    body: JSON.stringify(\r\n      { email }\r\n    ),\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\n//смена пароля\r\nexport const resetPasswordRequest = (state: { password: string, token: string }) => {\r\n  return fetch(`${apiNorma.url}/password-reset/reset`, {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: apiNorma.headers,\r\n    body: JSON.stringify(\r\n      {\r\n        password: state.password,\r\n        token: state.token,\r\n      }\r\n    ),\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\nexport const getOrdersUserRequest = () => {\r\n  return fetchWithRefreshToken(`${apiNorma.url}/orders`, {\r\n    method: 'GET',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n      ...apiNorma.headers,\r\n      Authorization: 'Bearer ' + getCookie('token')\r\n    },\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n    .then((res) => request(res))\r\n};\r\n\r\nexport const getOrdersAllRequest = () => {\r\n  return fetch(`${apiNorma.url}/orders/all`, {\r\n    method: 'GET',\r\n    mode: 'cors',\r\n    cache: 'no-cache',\r\n    credentials: 'same-origin',\r\n    headers: apiNorma.headers,\r\n    redirect: 'follow',\r\n    referrerPolicy: 'no-referrer',\r\n  })\r\n    .then((res) => request(res))\r\n};","export const CREATE_ORDER_FAILED: 'CREATE_ORDER_FAILED' = 'CREATE_ORDER_FAILED';\r\nexport const GET_ORDERS_FAILED: 'GET_ORDER_FAILED' = 'GET_ORDER_FAILED';\r\nexport const GET_USER_ORDERS_FAILED: 'GET_USER_ORDER_FAILED' = 'GET_USER_ORDER_FAILED';\r\n\r\nexport interface ICreateOrderFailedAction {\r\n  readonly type: typeof CREATE_ORDER_FAILED\r\n}\r\n\r\nexport interface IGetOrdersFailedAction {\r\n  readonly type: typeof GET_ORDERS_FAILED\r\n}\r\n\r\nexport interface IGetUserOrdersFailedAction {\r\n  readonly type: typeof GET_USER_ORDERS_FAILED\r\n}\r\n\r\nexport const createOrderFailed = (): ICreateOrderFailedAction => {\r\n  return {\r\n    type: CREATE_ORDER_FAILED\r\n  }\r\n};\r\n\r\nexport const getOrdersFailedAction = (): IGetOrdersFailedAction => {\r\n  return {\r\n    type: GET_ORDERS_FAILED\r\n  }\r\n};\r\n\r\nexport const getUserOrdersFailedAction = (): IGetUserOrdersFailedAction => {\r\n  return {\r\n    type: GET_USER_ORDERS_FAILED\r\n  }\r\n};","import { \r\n  TOrder, \r\n  TOrderInfo,\r\n } from \"../../../types\";\r\nimport { \r\n  ICreateOrderFailedAction,\r\n  IGetOrdersFailedAction,\r\n  IGetUserOrdersFailedAction, \r\n} from \"./action-creator-order\";\r\n\r\nexport const CREATE_ORDER_REQUEST: 'CREATE_ORDER_REQUEST' = 'CREATE_ORDER_REQUEST';\r\nexport const CREATE_ORDER_SUCCESS: 'CREATE_ORDER_SUCCESS' = 'CREATE_ORDER_SUCCESS';\r\n\r\nexport const GET_ORDERS_REQUEST: 'GET_ORDER_REQUEST' = 'GET_ORDER_REQUEST';\r\nexport const GET_ORDERS_SUCCESS: 'GET_ORDER_SUCCESS' = 'GET_ORDER_SUCCESS';\r\n\r\nexport const GET_USER_ORDERS_REQUEST: 'GET_USER_ORDER_REQUEST' = 'GET_USER_ORDER_REQUEST';\r\nexport const GET_USER_ORDERS_SUCCESS: 'GET_USER_ORDER_SUCCESS' = 'GET_USER_ORDER_SUCCESS';\r\n\r\n\r\nexport interface ICreateOrderRequestAction {\r\n  readonly type: typeof CREATE_ORDER_REQUEST;\r\n}\r\n\r\nexport interface ICteateOrderSuccessAction {\r\n  readonly type: typeof CREATE_ORDER_SUCCESS;\r\n  readonly order: TOrderInfo;\r\n}\r\n\r\nexport interface IGetOrdersRequestAction {\r\n  readonly type: typeof GET_ORDERS_REQUEST;\r\n}\r\n\r\nexport interface IGetOrdersSuccessAction {\r\n  readonly type: typeof GET_ORDERS_SUCCESS;\r\n  readonly feedOrders: Array<TOrder>;\r\n}\r\n\r\nexport interface IGetUserOrdersRequestAction {\r\n  readonly type: typeof GET_USER_ORDERS_REQUEST;\r\n  \r\n}\r\n\r\nexport interface IGetUserOrdersSuccessAction {\r\n  readonly type: typeof GET_USER_ORDERS_SUCCESS;\r\n  readonly feedOrders: Array<TOrder>;\r\n}\r\n\r\nexport type TOrderActions =\r\n  | ICreateOrderFailedAction\r\n  | ICreateOrderRequestAction\r\n  | ICteateOrderSuccessAction\r\n  | IGetOrdersFailedAction\r\n  | IGetOrdersRequestAction\r\n  | IGetOrdersSuccessAction\r\n  | IGetUserOrdersFailedAction\r\n  | IGetUserOrdersRequestAction\r\n  | IGetUserOrdersSuccessAction;\r\n","import {\r\n  addOrderRequest,\r\n  getOrdersUserRequest,\r\n  getOrdersAllRequest,\r\n} from '../../../utils/api';\r\nimport {\r\n  createOrderFailed,\r\n  getOrdersFailedAction,\r\n  getUserOrdersFailedAction,\r\n} from './action-creator-order';\r\nimport { CLEAR_CONSTRUCTOR } from \"../ingredients/action-type-ingredients\";\r\nimport {\r\n  CREATE_ORDER_REQUEST,\r\n  CREATE_ORDER_SUCCESS,\r\n  GET_ORDERS_REQUEST,\r\n  GET_ORDERS_SUCCESS,\r\n  GET_USER_ORDERS_REQUEST,\r\n  GET_USER_ORDERS_SUCCESS,\r\n} from './action-type-order';\r\nimport { \r\n  TDispatch, \r\n  TThunk,\r\n } from '../../../types';\r\n\r\nexport const createOrder: TThunk = (ingredients_id: Array<string>) => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: CREATE_ORDER_REQUEST\r\n    });\r\n    addOrderRequest(ingredients_id).then((res) => {\r\n      if (res && res.success) {\r\n        dispatch({\r\n          type: CREATE_ORDER_SUCCESS,\r\n          order: res\r\n        });\r\n        dispatch({ type: CLEAR_CONSTRUCTOR });\r\n      } else {\r\n        dispatch(createOrderFailed());\r\n      }\r\n    }).catch(err => {\r\n      console.log(err)\r\n      dispatch(createOrderFailed());\r\n    })\r\n  };\r\n};\r\n\r\nexport const getOrders: TThunk = () => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: GET_ORDERS_REQUEST,\r\n    });\r\n    getOrdersAllRequest()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ORDERS_SUCCESS,\r\n            feedOrders: res.orders,\r\n          });\r\n        } else {\r\n          dispatch(getOrdersFailedAction());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(getOrdersFailedAction());\r\n      });\r\n  };\r\n};\r\n\r\nexport const getUserOrders: TThunk = () => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: GET_USER_ORDERS_REQUEST,\r\n    });\r\n    getOrdersUserRequest()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_USER_ORDERS_SUCCESS,\r\n            feedOrders: res.orders,\r\n          });\r\n        } else {\r\n          dispatch(getUserOrdersFailedAction());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(getUserOrdersFailedAction());\r\n      });\r\n  };\r\n};\r\n","export const OPEN_MODAL: 'OPEN_MODAL' = 'OPEN_MODAL';\r\nexport const CLOSE_MODAL: 'CLOSE_MODAL' = 'CLOSE_MODAL';\r\n\r\nexport interface IOpenModalAction {\r\n  readonly type: typeof OPEN_MODAL;\r\n  readonly callback: null | (() => void);\r\n}\r\n\r\nexport interface ICloseModalAction {\r\n  readonly type: typeof CLOSE_MODAL;\r\n  readonly callback: null | (() => void);\r\n}\r\n\r\nexport type TModalActions =\r\n  | IOpenModalAction\r\n  | ICloseModalAction;\r\n","import { FC } from 'react';\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './burger-item.module.css';\r\nimport { useRef } from 'react';\r\nimport {\r\n  useDrag,\r\n  useDrop,\r\n} from 'react-dnd';\r\nimport { TIngredient } from \"../../types\";\r\n\r\nexport type TIngredientWithProductId = TIngredient &\r\n{ productId: string };\r\n\r\ntype TProps = {\r\n  item: TIngredientWithProductId,\r\n  index: number,\r\n  deleteIngredient: () => void,\r\n  moveItem: (dragIndex: number, hoverIndex: number) => void\r\n}\r\n\r\nexport const BurgerItem: FC<TProps> = ({ item, index, deleteIngredient, moveItem }) => {\r\n  const id = item._id;\r\n\r\n  const ref = useRef<HTMLLIElement>(null);\r\n  const [, drop] = useDrop({\r\n    accept: 'item',\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(el: { id: number, index: number }, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      };\r\n      const dragIndex = el.index;\r\n      const hoverIndex = index;\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      };\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n\r\n      const clientOffset = monitor.getClientOffset();\r\n\r\n      const hoverClientY = clientOffset!.y - hoverBoundingRect.top;\r\n\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      };\r\n\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      };\r\n\r\n      moveItem(dragIndex, hoverIndex);\r\n\r\n      el.index = hoverIndex;\r\n    },\r\n  });\r\n  const [{ isDrag }, drag] = useDrag({\r\n    type: 'item',\r\n    item: () => {\r\n      return { id, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const opacity = isDrag ? 0 : 1;\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <li className={`${styles.item}`} ref={ref} style={{ opacity }}>\r\n      <DragIcon type=\"primary\" />\r\n      <ConstructorElement\r\n        text={item.name}\r\n        price={item.price}\r\n        thumbnail={item.image}\r\n        handleClose={deleteIngredient}\r\n      />\r\n    </li>\r\n  )\r\n};\r\n","import { FC } from 'react';\r\nimport styles from \"./total-cost.module.css\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ntype TProps = {\r\n  price: number\r\n};\r\n\r\nexport const TotalCost: FC<TProps> = ({ price }) => {\r\n\r\n  return (\r\n    <div className={`${styles.container} mr-10`}>\r\n      <p className=\"text text_type_digits-medium mr-2\">\r\n        {price}\r\n      </p>\r\n      <CurrencyIcon type=\"primary\" />\r\n    </div>\r\n  )\r\n};\r\n","import React, { FC } from 'react';\r\nimport styles from \"./modal-overlay.module.css\";\r\n\r\ntype TProps = {\r\n  children?: React.ReactNode, \r\n  onCloseGoBack: () => void\r\n}\r\n\r\nexport const ModalOverlay: FC<TProps>= ({ children, onCloseGoBack }) => {\r\n\r\n  return (\r\n    <div\r\n      className={styles.overlay}\r\n      onClick={onCloseGoBack}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import React, { \r\n  useEffect, \r\n  FC, \r\n} from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport styles from \"./modal.module.css\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { ModalOverlay } from \"../modal-overlay/modal-overlay\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector } from '../../utils/hooks';\r\n\r\ntype TProps = {\r\n  children: React.ReactNode\r\n}\r\n\r\nexport const Modal: FC<TProps> = ({ children }) => {\r\n\r\n  const history = useHistory();\r\n\r\n  const { visible, callback } = useSelector((store) => store.modal);\r\n\r\n  const onCloseGoBack = () => {\r\n    if (visible && callback) {\r\n      callback();\r\n    } else {\r\n      history.goBack();\r\n    };\r\n  };\r\n\r\n  const handleEsc = (e: KeyboardEvent) => {\r\n    if (e.key === 'Escape') {\r\n      onCloseGoBack();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleEsc);\r\n    return () => { window.removeEventListener('keydown', handleEsc); }\r\n  }, [handleEsc]);\r\n\r\n  return ReactDOM.createPortal(\r\n    <>\r\n      <ModalOverlay onCloseGoBack={onCloseGoBack} />\r\n      <div className={`${styles.content} p-10 pb-15`} >\r\n        <div className={styles.close} onClick={onCloseGoBack}>\r\n          <CloseIcon type=\"primary\" />\r\n        </div>\r\n        <div>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </>,\r\n    document.getElementById(\"modals\")!\r\n  );\r\n};\r\n","import {\r\n  useCallback,\r\n  FC,\r\n} from \"react\";\r\nimport {\r\n  ConstructorElement,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./burger-constructor.module.css\";\r\nimport { OrderDetails } from \"../order-details/order-details\";\r\nimport {\r\n  DELETE_ITEM,\r\n  DECREASE_ITEM,\r\n  UPDATE_CONSTRUCTOR,\r\n} from \"../../services/actions/ingredients/action-type-ingredients\";\r\nimport { calculationTotalCost } from \"../../utils/functions\";\r\nimport { createOrder } from \"../../services/actions/order/order\";\r\nimport {\r\n  CLOSE_MODAL,\r\n  OPEN_MODAL,\r\n} from '../../services/actions/modal/action-type-modal';\r\nimport { BurgerItem } from '../burger-item/burger-item';\r\nimport { TotalCost } from \"../total-cost/total-cost\";\r\nimport { useDrop } from 'react-dnd';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Modal } from \"../modal/modal\";\r\nimport { TIngredient } from \"../../types\";\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from \"../../utils/hooks\";\r\n\r\ntype TProps = {\r\n  handlerDrop: (item: TIngredient) => void;\r\n};\r\n\r\ntype TIngredientWithProductId = TIngredient &\r\n{ productId: string };\r\n\r\nexport const BurgerConstructor: FC<TProps> = ({ handlerDrop }) => {\r\n  const { bun, notBun } = useSelector((store) => store.ingredients.burgerIngredients);\r\n  const { visible } = useSelector((store) => store.modal);\r\n  const { isAuth } = useSelector((store) => store.user);\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const moveItem = useCallback((dragIndex, hoverIndex) => {\r\n    dispatch({\r\n      type: UPDATE_CONSTRUCTOR,\r\n      hoverIndex: hoverIndex,\r\n      dragIndex: dragIndex\r\n    })\r\n  }, [dispatch]);\r\n\r\n  const [{ canDrop, isHover }, drop] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(item: TIngredientWithProductId) {\r\n      handlerDrop(item);\r\n    },\r\n    collect: monitor => ({\r\n      isHover: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  });\r\n\r\n  const handlerClick = () => {\r\n    if (isAuth) {\r\n      const ingredients_id = notBun.map((el: TIngredientWithProductId) => el._id)\r\n      dispatch(\r\n        createOrder(\r\n          [bun?._id, ...ingredients_id]\r\n        )\r\n      );\r\n      dispatch({\r\n        type: OPEN_MODAL,\r\n        callback: () => dispatch({ type: CLOSE_MODAL }),\r\n      });\r\n    } else {\r\n      history.replace({ pathname: \"/login\" });\r\n      return;\r\n    };\r\n  };\r\n\r\n  const style: React.CSSProperties = notBun.length > 4 ? { overflowY: 'auto' } : {};\r\n  const isActive = canDrop && isHover;\r\n  const classStyle = isActive ? 'active' : canDrop ? 'candrop' : '';\r\n  const classForNotBun = (notBun.length || bun) && classStyle;\r\n  const classStyles = classForNotBun ? classForNotBun : classStyle;\r\n  \r\n  return (\r\n    <div \r\n    className={`${styles.container} pl-4`} \r\n    ref={drop}\r\n    data-cy='drop-target'\r\n    >\r\n      {(!bun && notBun.length < 1) &&\r\n        <div className={`${styles.emptyContainer} ${styles[classStyle]}`}>\r\n          <h1 className=\"text text_type_main-large text_color_inactive mb-10\">\r\n            Перенесите сюда ингредиенты, которые хотите добавить в ваш бургер.\r\n          </h1>\r\n          <h2 className=\"text text_type_main-medium text_color_inactive mt-4\">\r\n            Для начала добавьте булку.\r\n          </h2>\r\n        </div>\r\n      }\r\n\r\n      <div className={`${styles.ingredients} ${styles[classStyles]}`} data-cy=\"up-bun\">\r\n        {bun && <div className='mr-10'>\r\n          <ConstructorElement\r\n            type=\"top\"\r\n            isLocked={true}\r\n            text={`${bun.name} (верх)`}\r\n            price={bun.price}\r\n            thumbnail={bun.image}\r\n          />\r\n        </div>\r\n        }\r\n\r\n        {!bun && notBun.length ?\r\n          <div className={styles.bun}>\r\n            <h2 className={`$ text text_type_main-medium text_color_inactive mb-10`}>\r\n              Вы сможете оформить заказ, если добавите булку\r\n            </h2>\r\n          </div> :\r\n          \"\"\r\n        }\r\n\r\n        <ul \r\n        className={styles.notBun} \r\n        style={style}\r\n        data-cy=\"other-ingredients-container\"\r\n        >\r\n          {notBun.map((item: TIngredientWithProductId, i: number) => {\r\n            const deleteIngredient = () => {\r\n              dispatch({\r\n                type: DELETE_ITEM,\r\n                id: item.productId\r\n              })\r\n              dispatch({\r\n                type: DECREASE_ITEM,\r\n                key: item._id,\r\n                typeItem: item.type\r\n              })\r\n            }\r\n            return (\r\n              <BurgerItem\r\n                item={item}\r\n                index={i}\r\n                key={item.productId}\r\n                deleteIngredient={deleteIngredient}\r\n                moveItem={moveItem}\r\n              />\r\n            )\r\n          })\r\n          }\r\n        </ul>\r\n\r\n        {bun && <div className='mr-10' data-cy=\"down-bun\">\r\n          <ConstructorElement\r\n            type=\"bottom\"\r\n            isLocked={true}\r\n            text={`${bun.name} (низ)`}\r\n            price={bun.price}\r\n            thumbnail={bun.image}\r\n          />\r\n        </div>\r\n        }\r\n      </div>\r\n\r\n      <div className={`${styles.order} mt-10 mr-10`}>\r\n        {(notBun.length && bun) ? <TotalCost price={calculationTotalCost(bun, notBun)} /> : null}\r\n        {bun &&\r\n          <Button type=\"primary\" size=\"large\" onClick={handlerClick} >\r\n            Оформить заказ\r\n          </Button>\r\n        }\r\n      </div>\r\n      {visible && <Modal><OrderDetails /></Modal>}\r\n    </div>\r\n  )\r\n};\r\n","import styles from './main.module.css';\r\nimport { BurgerIngredients } from '../../components/burger-ingredients/burger-ingredients';\r\nimport { BurgerConstructor } from '../../components/burger-constructor/burger-constructor';\r\nimport {\r\n  INCREASE_ITEM,\r\n  ADD_ITEM,\r\n} from \"../../services/actions/ingredients/action-type-ingredients\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { TIngredient } from '../../types';\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from '../../utils/hooks';\r\n\r\nexport const Main = () => {\r\n  const { isLoading, hasError, loaded } = useSelector((store) => store.ingredients);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handlerDrop = (item: TIngredient) => {\r\n    dispatch({\r\n      type: ADD_ITEM,\r\n      key: uuidv4(),\r\n      item: item\r\n    });\r\n    dispatch({\r\n      type: INCREASE_ITEM,\r\n      key: item._id,\r\n      typeItem: item.type\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main className={`${styles.main} p-10`}>\r\n      {isLoading && <h1 className={`${styles.isLoading} text text_type_main-large text_color_inactive`}>Загрузка...</h1>}\r\n      {hasError && <h1 className={`${styles.hasError} text text_type_main-large`}>Извините, произошла ошибка. </h1>}\r\n      {!isLoading && !hasError && loaded &&\r\n        <DndProvider backend={HTML5Backend}>\r\n          <div className={styles.container}>\r\n            <BurgerIngredients />\r\n            <BurgerConstructor handlerDrop={handlerDrop} />\r\n          </div>\r\n        </DndProvider>\r\n      }\r\n    </main >\r\n  );\r\n};\r\n","export const LOGIN_FAILED: 'LOGIN_FAILED' = 'LOGIN_FAILED';\r\nexport const LOGOUT_FAILED: 'LOGOUT_FAILED' = 'LOGOUT_FAILED';\r\nexport const REGISTER_FAILED: 'REGISTER_FAILED' = 'REGISTER_FAILED';\r\nexport const GET_USER_FAILED: 'GET_USER_FAILED' = 'GET_USER_FAILED';\r\nexport const REFRESH_TOKEN_FAILED: 'REFRESH_TOKEN_FAILED' = 'REFRESH_TOKEN_FAILED';\r\nexport const UPDATE_USER_FAILED: 'UPDATE_USER_FAILED' = 'UPDATE_USER_FAILED';\r\n\r\nexport interface ILoginFailedAction {\r\n  readonly type: typeof LOGIN_FAILED;\r\n}\r\n\r\nexport interface ILogoutFailedAction {\r\n  readonly type: typeof LOGOUT_FAILED;\r\n}\r\n\r\nexport interface IRegisterFailedAction {\r\n  readonly type: typeof REGISTER_FAILED;\r\n}\r\n\r\nexport interface IGetUserFailedAction {\r\n  readonly type: typeof GET_USER_FAILED;\r\n}\r\n\r\nexport interface IRefreshTokenFailedAction {\r\n  readonly type: typeof REFRESH_TOKEN_FAILED;\r\n}\r\n\r\nexport interface IUpdateUserFailedAction {\r\n  readonly type: typeof UPDATE_USER_FAILED;\r\n}\r\n\r\nexport const redisterFailed = (): IRegisterFailedAction => {\r\n  return {\r\n    type: REGISTER_FAILED\r\n  }\r\n};\r\n\r\nexport const logoutFailed = (): ILogoutFailedAction => {\r\n  return {\r\n    type: LOGOUT_FAILED\r\n  }\r\n};\r\n\r\nexport const loginFailed = (): ILoginFailedAction => {\r\n  return {\r\n    type: LOGIN_FAILED\r\n  }\r\n};\r\n\r\nexport const getUserFailed = (): IGetUserFailedAction => {\r\n  return {\r\n    type: GET_USER_FAILED\r\n  }\r\n};\r\n\r\nexport const refreshTokenFailed = (): IRefreshTokenFailedAction => {\r\n  return {\r\n    type: REFRESH_TOKEN_FAILED\r\n  }\r\n};\r\n\r\nexport const updateUserFailed = (): IUpdateUserFailedAction => {\r\n  return {\r\n    type: UPDATE_USER_FAILED\r\n  }\r\n};\r\n","import {\r\n  ILoginFailedAction,\r\n  ILogoutFailedAction,\r\n  IRegisterFailedAction,\r\n  IGetUserFailedAction,\r\n  IRefreshTokenFailedAction,\r\n  IUpdateUserFailedAction\r\n} from \"./action-creator-user\";\r\n\r\nexport const LOGIN_REQUEST: 'LOGIN_REQUEST' = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS: 'LOGIN_SUCCESS' = 'LOGIN_SUCCESS';\r\n\r\nexport const LOGOUT_REQUEST: 'LOGOUT_REQUEST' = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS: 'LOGOUT_SUCCESS' = 'LOGOUT_SUCCESS';\r\n\r\nexport const REGISTER_REQUEST: 'REGISTER_REQUEST' = 'REGISTER_REQUEST';\r\nexport const REGISTER_SUCCESS: 'REGISTER_SUCCESS' = 'REGISTER_SUCCESS';\r\n\r\nexport const GET_USER_REQUEST: 'GET_USER_REQUEST' = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\n\r\nexport const REFRESH_TOKEN_REQUEST: 'REFRESH_TOKEN_REQUEST' = 'REFRESH_TOKEN_REQUEST';\r\nexport const REFRESH_TOKEN_SUCCESS: 'REFRESH_TOKEN_SUCCESS' = 'REFRESH_TOKEN_SUCCESS';\r\n\r\nexport const UPDATE_USER_REQUEST: 'UPDATE_USER_REQUEST' = 'UPDATE_USER_REQUEST';\r\nexport const UPDATE_USER_SUCCESS: 'UPDATE_USER_SUCCESS' = 'UPDATE_USER_SUCCESS';\r\n\r\nexport interface ILoginRequestAction {\r\n  readonly type: typeof LOGIN_REQUEST;\r\n}\r\n\r\nexport interface ILoginSuccessAction {\r\n  readonly type: typeof LOGIN_SUCCESS;\r\n  user: {\r\n    name: string,\r\n    email: string\r\n  };\r\n}\r\n\r\nexport interface ILogoutRequestAction {\r\n  readonly type: typeof LOGOUT_REQUEST;\r\n}\r\n\r\nexport interface ILogoutSuccessAction {\r\n  readonly type: typeof LOGOUT_SUCCESS;\r\n}\r\n\r\nexport interface IRegisterRequestAction {\r\n  readonly type: typeof REGISTER_REQUEST;\r\n}\r\n\r\nexport interface IRegisterSuccessAction {\r\n  readonly type: typeof REGISTER_SUCCESS;\r\n  user: {\r\n    name: string,\r\n    email: string\r\n  };\r\n}\r\n\r\nexport interface IGetUserRequestAction {\r\n  readonly type: typeof GET_USER_REQUEST;\r\n}\r\n\r\nexport interface IGetUserSuccessAction {\r\n  readonly type: typeof GET_USER_SUCCESS;\r\n  user: {\r\n    name: string,\r\n    email: string\r\n  };\r\n}\r\n\r\nexport interface IRefreshTokenRequestAction {\r\n  readonly type: typeof REFRESH_TOKEN_REQUEST;\r\n}\r\n\r\nexport interface IRefreshTokenSuccessAction {\r\n  readonly type: typeof REFRESH_TOKEN_SUCCESS;\r\n}\r\n\r\nexport interface IUpdateUserRequestAction {\r\n  readonly type: typeof UPDATE_USER_REQUEST;\r\n}\r\n\r\nexport interface IUpdateUserSuccessAction {\r\n  readonly type: typeof UPDATE_USER_SUCCESS;\r\n  user: {\r\n    name: string,\r\n    email: string\r\n  };\r\n}\r\n\r\nexport type TUserActions =\r\n  | ILoginRequestAction\r\n  | ILoginSuccessAction\r\n  | ILoginFailedAction\r\n  | ILogoutRequestAction\r\n  | ILogoutSuccessAction\r\n  | ILogoutFailedAction\r\n  | IRegisterRequestAction\r\n  | IRegisterSuccessAction\r\n  | IRegisterFailedAction\r\n  | IGetUserRequestAction\r\n  | IGetUserSuccessAction\r\n  | IGetUserFailedAction\r\n  | IRefreshTokenRequestAction\r\n  | IRefreshTokenSuccessAction\r\n  | IRefreshTokenFailedAction\r\n  | IUpdateUserRequestAction\r\n  | IUpdateUserSuccessAction\r\n  | IUpdateUserFailedAction;\r\n","import { \r\n  TDispatch, \r\n  TThunk,\r\n } from \"../../../types\";\r\nimport {\r\n  signUpRequest,\r\n  signInRequest,\r\n  signOutRequest,\r\n  getUserRequest,\r\n  refreshTokenRequest,\r\n  updateUserRequest\r\n} from \"../../../utils/api\";\r\n\r\nimport { \r\n  setCookie, \r\n  deleteCookie,\r\n  getCookie,\r\n} from \"../../../utils/functions\";\r\n\r\nimport { \r\n  loginFailed, \r\n  redisterFailed, \r\n  logoutFailed, \r\n  getUserFailed, \r\n  refreshTokenFailed, \r\n  updateUserFailed, \r\n} from \"./action-creator-user\";\r\n\r\nimport {\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  REFRESH_TOKEN_REQUEST,\r\n  REFRESH_TOKEN_SUCCESS,\r\n  UPDATE_USER_REQUEST,\r\n  UPDATE_USER_SUCCESS,\r\n} from \"./action-type-user\";\r\n\r\n//регистрация\r\nexport const register: TThunk = (state: {name: string, email: string, password: string}) => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: REGISTER_REQUEST,\r\n    });\r\n    signUpRequest(state)\r\n      .then(data => {\r\n        if (data.success) {\r\n          const authToken = data.accessToken.split('Bearer ')[1];\r\n          const refreshToken = data.refreshToken;\r\n          setCookie('token', authToken);\r\n          localStorage.setItem('refreshToken', refreshToken);\r\n          dispatch({\r\n            type: REGISTER_SUCCESS,\r\n            user: data.user,\r\n          });\r\n        } else {\r\n          dispatch(redisterFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(redisterFailed());\r\n      });\r\n  };\r\n};\r\n\r\n//вход\r\nexport const login: TThunk = (state: {email: string, password: string}) => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: LOGIN_REQUEST,\r\n    });\r\n    signInRequest(state)\r\n      .then(data => {\r\n        if (data.success) {\r\n          const authToken = data.accessToken.split('Bearer ')[1];\r\n          const refreshToken = data.refreshToken;\r\n          setCookie('token', authToken);\r\n          localStorage.setItem('refreshToken', refreshToken);\r\n          dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            user: data.user,\r\n          });\r\n        } else {\r\n          dispatch(loginFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(loginFailed());\r\n      });\r\n  };\r\n};\r\n\r\n//выход \r\nexport const logout: TThunk = () => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: LOGOUT_REQUEST,\r\n    });\r\n    signOutRequest()\r\n      .then(data => {\r\n        if (data.success) {\r\n          deleteCookie('token');\r\n          localStorage.removeItem('refreshToken');\r\n          dispatch({\r\n            type: LOGOUT_SUCCESS,\r\n          });\r\n        } else {\r\n          dispatch(logoutFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(logoutFailed());\r\n      });\r\n  };\r\n};\r\n\r\n//получение данных о пользователе\r\nexport const getUser: TThunk = () => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: GET_USER_REQUEST,\r\n    });\r\n    getUserRequest()\r\n      .then(data => {\r\n        if (data.success) {\r\n          dispatch({\r\n            type: GET_USER_SUCCESS,\r\n            user: data.user,\r\n          });\r\n        } else {\r\n          throw data;\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        dispatch(getUserFailed());\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n\r\n//обновление токена\r\nexport const refreshToken: TThunk = () => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: REFRESH_TOKEN_REQUEST,\r\n    });\r\n    refreshTokenRequest()\r\n      .then(data => {\r\n        if (data.success) {\r\n          localStorage.setItem('refreshToken', data.refreshToken);\r\n          const authToken = data.accessToken.split('Bearer ')[1];\r\n          setCookie('token', authToken);\r\n          dispatch({\r\n            type: REFRESH_TOKEN_SUCCESS,\r\n          });\r\n        } else {\r\n          dispatch(refreshTokenFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        deleteCookie('token');\r\n        localStorage.removeItem('refreshToken');\r\n        dispatch(refreshTokenFailed())\r\n      });\r\n  };\r\n};\r\n\r\n//изменение данных пользователя\r\nexport const updateUser: TThunk = (state: {name: string, email: string, password: string}) => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: UPDATE_USER_REQUEST,\r\n    });\r\n    updateUserRequest(state)\r\n      .then(data => {\r\n        if (data.success) {\r\n          dispatch({\r\n            type: UPDATE_USER_SUCCESS,\r\n            user: data.user,\r\n          });\r\n        } else {\r\n          dispatch(updateUserFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 403) {\r\n          // dispatch(refreshToken());\r\n        }\r\n        dispatch(updateUserFailed());\r\n      });\r\n  };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styles from \"./login.module.css\";\r\nimport {\r\n  Button,\r\n  EmailInput,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {\r\n  Link,\r\n  Redirect,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { login } from '../../services/actions/user/user';\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from \"../../utils/hooks\";\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation<{ from: any }>();\r\n  const { isAuth } = useSelector((store) => store.user);\r\n\r\n  const [state, setState] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  //изменение данных в форме\r\n  const onChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setState({\r\n      ...state,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  //отправка формы\r\n  const onSubmitForm = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(login(state));\r\n  };\r\n\r\n  if (isAuth) {\r\n    return (\r\n      <Redirect\r\n        to={location.state?.from.pathname || '/'}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form\r\n        onSubmit={onSubmitForm}\r\n        className={`${styles.form} mb-20`}\r\n      >\r\n        <h1 className=\"text text_type_main-medium\">Вход</h1>\r\n        <EmailInput\r\n          value={state.email}\r\n          name=\"email\"\r\n          onChange={onChangeInput}\r\n        />\r\n        <PasswordInput\r\n          value={state.password}\r\n          name=\"password\"\r\n          onChange={onChangeInput}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"medium\"\r\n        >\r\n          Войти\r\n        </Button>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className=\"text text_type_main-default text_color_inactive mr-2\">Вы - новый пользователь?</p>\r\n        <Link\r\n          to=\"/register\"\r\n          className={`${styles.link} text text_type_main-default`}\r\n        >\r\n          Зарегистрироваться\r\n        </Link>\r\n      </div>\r\n      <div className={styles.link_container}>\r\n        <p className=\"text text_type_main-default text_color_inactive mr-2\">Вы забыли пароль?</p>\r\n        <Link\r\n          to='/forgot-password'\r\n          className={`${styles.link} text text_type_main-default`}\r\n        >\r\n          Восстановить пароль\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styles from \"./register.module.css\";\r\nimport {\r\n  Link,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n  EmailInput,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { register } from \"../../services/actions/user/user\";\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from \"../../utils/hooks\";\r\n\r\nexport const Register = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { isAuth } = useSelector((store) => store.user);\r\n\r\n  const [state, setState] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  //изменение данных в форме\r\n  const onChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setState({\r\n      ...state,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //отправка формы\r\n  const onSubmitForm = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(register(state));\r\n  };\r\n\r\n  if (isAuth) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={onSubmitForm} className={`${styles.form} mb-20`}>\r\n        <h1 className=\"text text_type_main-medium\">Регистрация</h1>\r\n        <Input\r\n          type={'text'}\r\n          placeholder={'Имя'}\r\n          value={state.name}\r\n          name={'name'}\r\n          error={false}\r\n          errorText={'Ошибка'}\r\n          size={'default'}\r\n          onChange={onChangeInput}\r\n          icon='EditIcon'\r\n        />\r\n        <EmailInput\r\n          value={state.email}\r\n          name=\"email\"\r\n          onChange={onChangeInput}\r\n        />\r\n        <PasswordInput\r\n          value={state.password}\r\n          name={'password'}\r\n          onChange={onChangeInput}\r\n        />\r\n        <Button type='primary' size='medium'>\r\n          Зарегистрироваться\r\n        </Button>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className=\"text text_type_main-default text_color_inactive mr-2\">Уже зарегистрированы?</p>\r\n        <Link\r\n          to='/login'\r\n          className={`${styles.link} text text_type_main-default`}\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","export const FORGOT_PASSWORD_FAILED: 'FORGOT_PASSWORD_FAILED' = 'FORGOT_PASSWORD_FAILED';\r\nexport const RESET_PASSWORD_FAILED: 'RESET_PASSWORD_FAILED' = 'RESET_PASSWORD_FAILED';\r\n\r\nexport interface IForgotPasswordFailedAction {\r\n  readonly type: typeof FORGOT_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface IResetPasswordFailedAction {\r\n  readonly type: typeof RESET_PASSWORD_FAILED;\r\n}\r\n\r\nexport const forgotPasswordFailed = (): IForgotPasswordFailedAction => {\r\n  return {\r\n    type: FORGOT_PASSWORD_FAILED\r\n  }\r\n};\r\n\r\nexport const resetPasswordFailed = (): IResetPasswordFailedAction => {\r\n  return {\r\n    type: RESET_PASSWORD_FAILED\r\n  }\r\n};\r\n","import {\r\n  IForgotPasswordFailedAction,\r\n  IResetPasswordFailedAction\r\n} from \"./action-creator-password\";\r\n\r\nexport const FORGOT_PASSWORD_REQUEST: 'FORGOT_PASSWORD_REQUEST' = 'FORGOT_PASSWORD_REQUEST';\r\nexport const FORGOT_PASSWORD_SUCCESS: 'FORGOT_PASSWORD_SUCCESS' = 'FORGOT_PASSWORD_SUCCESS';\r\n\r\nexport const RESET_PASSWORD_REQUEST: 'RESET_PASSWORD_REQUEST' = 'RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS: 'RESET_PASSWORD_SUCCESS' = 'RESET_PASSWORD_SUCCESS';\r\n\r\nexport interface IForgotPasswordRequestAction {\r\n  readonly type: typeof FORGOT_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IForgotPasswordSuccessAction {\r\n  readonly type: typeof FORGOT_PASSWORD_SUCCESS;\r\n}\r\n\r\nexport interface IResetPasswordRequestAction {\r\n  readonly type: typeof RESET_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IResetPasswordSuccessAction {\r\n  readonly type: typeof RESET_PASSWORD_SUCCESS;\r\n}\r\n\r\nexport type TPasswordActions =\r\n  | IForgotPasswordFailedAction\r\n  | IForgotPasswordRequestAction\r\n  | IForgotPasswordSuccessAction\r\n  | IResetPasswordFailedAction\r\n  | IResetPasswordRequestAction\r\n  | IResetPasswordSuccessAction;\r\n","import { \r\n  TDispatch, \r\n  TThunk,\r\n } from \"../../../types\";\r\nimport {\r\n  forgotPasswordRequest,\r\n  resetPasswordRequest\r\n} from \"../../../utils/api\";\r\n\r\nimport {\r\n  forgotPasswordFailed,\r\n  resetPasswordFailed\r\n} from \"./action-creator-password\";\r\n\r\nimport { \r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n  RESET_PASSWORD_REQUEST,\r\n  RESET_PASSWORD_SUCCESS\r\n } from \"./action-type-password\";\r\n\r\n\r\n//восстановление пароля\r\nexport const forgotPassword: TThunk = (email: string) => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: FORGOT_PASSWORD_REQUEST,\r\n    });\r\n    forgotPasswordRequest(email)\r\n      .then(data => {\r\n        if (data.success) {\r\n          dispatch({\r\n            type: FORGOT_PASSWORD_SUCCESS,\r\n          });\r\n        } else {\r\n          dispatch(forgotPasswordFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        dispatch(forgotPasswordFailed());\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n\r\n//смена пароля\r\nexport const resetPassword: TThunk = (state: { password: string, token: string}) => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: RESET_PASSWORD_REQUEST,\r\n    });\r\n    resetPasswordRequest(state)\r\n      .then(data => {\r\n        if (data.success) {\r\n          dispatch({\r\n            type: RESET_PASSWORD_SUCCESS,\r\n          });\r\n        } else {\r\n          dispatch(resetPasswordFailed());\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        dispatch(resetPasswordFailed());\r\n        console.log(err);\r\n      });\r\n  };\r\n};\r\n","import React, { useState } from 'react';\r\nimport styles from \"./reset-password.module.css\";\r\nimport {\r\n  Link,\r\n  Redirect,\r\n} from 'react-router-dom';\r\nimport {\r\n  Button,\r\n  Input,\r\n  PasswordInput,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { resetPassword } from \"../../services/actions/password/password\";\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from '../../utils/hooks';\r\n\r\nexport const ResetPassword = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [state, setState] = useState({\r\n    password: '',\r\n    token: '',\r\n  });\r\n\r\n  //изменение данных в форме\r\n  const onChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setState({\r\n      ...state,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //нажатие на иконку\r\n  const onIconClick = () => {\r\n    console.log('Click!');\r\n  };\r\n\r\n  //отправка формы\r\n  const onSubmitForm = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(resetPassword(state));\r\n  };\r\n\r\n  const { isAuth } = useSelector((store) => store.user);\r\n\r\n  if (isAuth) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={onSubmitForm} className={`${styles.form} mb-20`}>\r\n        <h1 className=\"text text_type_main-medium\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <PasswordInput\r\n          value={state.password}\r\n          name='password'\r\n          onChange={onChangeInput}\r\n        />\r\n        <Input\r\n          type='text'\r\n          placeholder='Введите код из письма'\r\n          onChange={onChangeInput}\r\n          value={state.token}\r\n          name='token'\r\n          error={false}\r\n          onIconClick={onIconClick}\r\n          errorText='Ошибка'\r\n          size='default'\r\n          icon='EditIcon'\r\n        />\r\n        <Button\r\n          type='primary'\r\n          size='medium'\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className=\"text text_type_main-default text_color_inactive mr-2\">\r\n          Вспомнили пароль?\r\n        </p>\r\n        <Link\r\n          to='/forgot-password'\r\n          className={`${styles.link} text text_type_main-default`}\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import React, { useState } from 'react';\r\nimport styles from \"./forgot-password.module.css\";\r\nimport {\r\n  Link,\r\n  Redirect\r\n} from 'react-router-dom';\r\nimport {\r\n  Button,\r\n  EmailInput,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { forgotPassword } from '../../services/actions/password/password';\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from '../../utils/hooks';\r\n\r\nexport const ForgotPassword = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { isAuth } = useSelector((store) => store.user);\r\n\r\n  const hasForgotPasswordRequest = useSelector((store) => store.password.forgotPasswordRequest);\r\n\r\n  const [email, setEmailValue] = useState(\"\");\r\n\r\n  //изменение данных в форме\r\n  const onChangeEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEmailValue(e.target.value);\r\n  };\r\n\r\n  //отправка формы\r\n  const onSubmitForm = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    dispatch(forgotPassword(email));\r\n  };\r\n\r\n  if (isAuth) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: '/'\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  if (hasForgotPasswordRequest) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: 'reset-password'\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form onSubmit={onSubmitForm} className={`${styles.form} mb-20`}>\r\n        <h1 className=\"text text_type_main-medium\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <EmailInput\r\n          onChange={onChangeEmail}\r\n          value={email}\r\n          name=\"email\"\r\n        />\r\n        <Button\r\n          type='primary'\r\n          size='medium'\r\n        >\r\n          Восстановить\r\n        </Button>\r\n      </form>\r\n      <div className={styles.link_container}>\r\n        <p className=\"text text_type_main-default text_color_inactive mr-2\">\r\n          Вспомнили пароль?\r\n        </p>\r\n        <Link\r\n          to=\"/login\"\r\n          className={`${styles.link} text text_type_main-default`}\r\n        >\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import { FC } from \"react\";\r\nimport styles from './feed-item-check.module.css';\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {\r\n  getBurgerPrice,\r\n  getIngredientsOrder,\r\n  orderDate,\r\n  statusColor\r\n} from \"../../utils/functions\";\r\nimport { TIngredient, TOrder } from \"../../types\";\r\n\r\ntype TProps = {\r\n  item: TOrder,\r\n  allIngredients: Array<TIngredient>,\r\n};\r\n\r\nexport const FeedItemTrue: FC<TProps> = ({ item, allIngredients }) => {\r\n\r\n  const orderIngredients = getIngredientsOrder(item, allIngredients);\r\n\r\n  const bunItem = orderIngredients.find(el => el?.type === 'bun');\r\n\r\n  const notBunItems = orderIngredients.filter(el => el?.type !== 'bun');\r\n\r\n  let notBunItemsLast = null;\r\n\r\n  let notBunItemsMax = notBunItems;\r\n\r\n  if (notBunItems.length > 5) {\r\n    notBunItemsMax = notBunItems.slice(0, 4);\r\n    notBunItemsLast = notBunItems.slice(4, 5);\r\n  };\r\n\r\n  let count = orderIngredients.length;\r\n\r\n  let zIndex = 900;\r\n\r\n  const burgerPrice = orderIngredients ? getBurgerPrice(orderIngredients) : '';\r\n\r\n  const date = orderDate(item.createdAt);\r\n\r\n  const st = statusColor(item.status);\r\n\r\n  return (\r\n    <li className={`${styles.li} p-6 mb-6 mr-2`} key={item._id}>\r\n\r\n      <div className={styles.number_order}>\r\n        <p className=\"text text_type_digits-default\">#{item.number}</p>\r\n        <p className=\"text text_type_main-default text_color_inactive\">{date}</p>\r\n      </div>\r\n\r\n      <div className={styles.name_and_status}>\r\n        <p className=\"text text_type_main-medium\">{item.name}</p>\r\n        <p className={`text text_type_main-default ${styles[`status_color_${st.textColor}`]}`}>{st.text}</p>\r\n      </div>\r\n\r\n      <div className={styles.pictures}>\r\n        <div className={styles.images}>\r\n\r\n          <div className={styles.div_image} style={{ zIndex: `${zIndex -= 1}` }}>\r\n            <img src={bunItem?.image_mobile} className={styles.image} alt='Вкусная булочка' />\r\n          </div>\r\n\r\n          <div className={styles.notBun}>\r\n            {notBunItemsMax.map((item, i) =>\r\n              <div className={styles.div_image} style={{ right: `${count += 16}px`, zIndex: `${zIndex -= 1}` }} key={i}>\r\n                <img src={item.image_mobile} className={styles.image} alt='Восхитительная начинка' />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {notBunItemsLast !== null ?\r\n            <div className={styles.div_image} style={{ right: `${count += 16}px`, zIndex: `${zIndex -= 1}` }}>\r\n              <img src={notBunItemsLast[0].image_mobile} className={styles.last_img} alt='Вкусная булочка' />\r\n            </div> : null}\r\n          {orderIngredients.length > 6 ? (<div className={`${styles.counter} text text_type_digits-default`} style={{ right: `${count += 46}px`, zIndex: '900' }}>\r\n            <span>{`+${orderIngredients.length - 6}`}</span>\r\n          </div>)\r\n            : null}\r\n\r\n        </div>\r\n\r\n        <div className={styles.price}>\r\n          <p className=\"text text_type_digits-default mr-2\">{burgerPrice}</p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  )\r\n};\r\n","import { FC } from \"react\";\r\nimport {\r\n  TIngredient,\r\n  TOrder,\r\n} from \"../../types\";\r\nimport { FeedItemTrue } from \"./feed-item-true\";\r\nimport { useSelector } from \"../../utils/hooks\";\r\n\r\ntype TProps = {\r\n  item: TOrder\r\n};\r\n\r\nexport const FeedItemCheck: FC<TProps> = ({ item }) => {\r\n  const { allIngredients } = useSelector((store) => store.ingredients);\r\n\r\n  function checkIngredients(array: Array<string | null>) {\r\n    let hasBun = false;\r\n    let hasOtherIngredient = false;\r\n    for (let i = 0; i < array.length; i++) {\r\n      if (array[i] == null) {\r\n        return false;\r\n      }\r\n      let ingredient = allIngredients.find((item: TIngredient) => item._id === array[i]);\r\n      if (ingredient?.type === 'bun') {\r\n        hasBun = true\r\n      }\r\n      if (ingredient?.type !== 'bun') {\r\n        hasOtherIngredient = true\r\n      }\r\n    }\r\n    if (hasBun && hasOtherIngredient) {\r\n      return true\r\n    }\r\n    return false\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {checkIngredients(item.ingredients) ?\r\n        (<FeedItemTrue allIngredients={allIngredients} item={item} />)\r\n        : ''}\r\n    </>\r\n  )\r\n};\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { TOrders } from \"../../types\";\r\n\r\nexport const AUTH_SOCKET_CREATE: 'AUTH_SOCKET_CREATE' = 'AUTH_SOCKET_CREATE';\r\nexport const AUTH_SOCKET_SUCCESS: 'AUTH_SOCKET_SUCCESS' = 'AUTH_SOCKET_SUCCESS';\r\nexport const AUTH_SOCKET_ERROR: 'AUTH_SOCKET_ERROR' = 'AUTH_SOCKET_ERROR';\r\nexport const AUTH_SOCKET_CLOSED: 'AUTH_SOCKET_CLOSED' = 'AUTH_SOCKET_CLOSED';\r\nexport const AUTH_SOCKET_CLOSE: 'AUTH_SOCKET_CLOSE' = 'AUTH_SOCKET_CLOSE';\r\nexport const AUTH_SOCKET_GET_MESSAGE: 'AUTH_SOCKET_GET_MESSAGE' = 'AUTH_SOCKET_GET_MESSAGE';\r\nexport const AUTH_SOCKET_SEND_MESSAGE: 'AUTH_SOCKET_MESSAGE' = 'AUTH_SOCKET_MESSAGE';\r\n\r\nexport const authSocketAllActions = {\r\n\tsocketCreate: AUTH_SOCKET_CREATE,\r\n\tsocketClose: AUTH_SOCKET_CLOSE,\r\n\tsocketSendMessage: AUTH_SOCKET_SEND_MESSAGE,\r\n\tonOpen: AUTH_SOCKET_SUCCESS,\r\n\tonClose: AUTH_SOCKET_CLOSED,\r\n\tonError: AUTH_SOCKET_ERROR,\r\n\tonGetMessage: AUTH_SOCKET_GET_MESSAGE,\r\n};\r\n\r\nexport interface IAuthSocketCreateAction {\r\n  readonly type: typeof AUTH_SOCKET_CREATE;\r\n}\r\n\r\nexport interface IAuthSocketCloseAction {\r\n  readonly type: typeof AUTH_SOCKET_CLOSE;\r\n}\r\n\r\nexport interface IAuthSocketSendMessageAction {\r\n  readonly type: typeof AUTH_SOCKET_SEND_MESSAGE;\r\n}\r\n\r\nexport interface IAuthSocketSuccessAction {\r\n  readonly type: typeof AUTH_SOCKET_SUCCESS;\r\n  payload: PayloadAction\r\n}\r\n\r\nexport interface IAuthSocketErrorAction {\r\n  readonly type: typeof AUTH_SOCKET_ERROR;\r\n  payload: PayloadAction\r\n}\r\n\r\nexport interface IAuthSocketClosedAction {\r\n  readonly type: typeof AUTH_SOCKET_CLOSED;\r\n  payload: PayloadAction\r\n}\r\n\r\nexport interface IAuthSocketGetMessageAction {\r\n  readonly type: typeof AUTH_SOCKET_GET_MESSAGE;\r\n  payload: TOrders\r\n}\r\n\r\nexport type TAuthSocketActions =\r\n  | IAuthSocketCreateAction\r\n  | IAuthSocketCloseAction\r\n  | IAuthSocketSendMessageAction\r\n  | IAuthSocketSuccessAction\r\n  | IAuthSocketErrorAction\r\n  | IAuthSocketClosedAction\r\n  | IAuthSocketGetMessageAction;\r\n","import { useEffect } from \"react\";\r\nimport styles from \"./order-history.module.css\";\r\nimport {\r\n  Link,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { FeedItemCheck } from \"../feed-item-check/feed-item-check\";\r\nimport {\r\n  AUTH_SOCKET_CLOSE,\r\n  AUTH_SOCKET_CREATE,\r\n} from \"../../services/actions/auth-socket-actions\";\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from \"../../utils/hooks\";\r\n\r\nexport const OrderHistory = () => {\r\n  const location = useLocation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    () => {\r\n      dispatch({ type: AUTH_SOCKET_CREATE });\r\n      return () => {\r\n        dispatch({ type: AUTH_SOCKET_CLOSE })\r\n      }\r\n    }, [dispatch]\r\n  );\r\n\r\n  const { orders } = useSelector((store) => store.authSocket);\r\n\r\n  return (\r\n    <ul className={styles.container}>\r\n      {orders.map(item => {\r\n        return (\r\n          <Link\r\n            to={{\r\n              pathname: `/profile/orders/${item.number}`,\r\n              state: { background: location }\r\n            }}\r\n            key={item._id}\r\n          >\r\n            <FeedItemCheck item={item} />\r\n          </Link>\r\n        )\r\n      })}\r\n    </ul>\r\n  )\r\n};\r\n","import React, {\r\n  useState,\r\n  useEffect\r\n} from 'react';\r\nimport styles from './form-user.module.css';\r\nimport {\r\n  Button,\r\n  Input,\r\n  EmailInput,\r\n  PasswordInput,\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport {\r\n  getUser,\r\n  updateUser\r\n} from '../../services/actions/user/user';\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from '../../utils/hooks';\r\n\r\nexport const FormUser = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getUser());\r\n  }, [dispatch]);\r\n\r\n  const { name, email } = useSelector((store) => store.user.user);\r\n\r\n  const [state, setState] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  //изменение данных в форме\r\n  const onChangeInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setState({\r\n      ...state,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //отправка формы\r\n  const onSubmitForm = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    const newDataUser = {\r\n      name: state.name !== name ? state.name : name,\r\n      email: state.email !== email ? state.email : email,\r\n      password: state.password,\r\n    };\r\n\r\n    dispatch(updateUser(newDataUser));\r\n  };\r\n\r\n  //нажатие на кнопку Отмена\r\n  const onCancel = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    setState({\r\n      name: name,\r\n      email: email,\r\n      password: '',\r\n    });\r\n  };\r\n\r\n  const hasName = state.name !== name; //изменено имя\r\n  const hasEmail = state.email !== email; //изменена почта\r\n  const hasState = !!state.email && !!state.name; //поле имя и почта заполнены\r\n\r\n  return (\r\n    <form className={`${styles.form}`} onSubmit={onSubmitForm}>\r\n      <Input\r\n        type='text'\r\n        placeholder={'Имя'}\r\n        name='name'\r\n        error={false}\r\n        errorText='Ошибка'\r\n        size='default'\r\n        onChange={onChangeInput}\r\n        value={name ? name : state.name}\r\n      />\r\n      <EmailInput\r\n        value={email ? email : state.email}\r\n        name=\"email\"\r\n        onChange={onChangeInput}\r\n      />\r\n      <PasswordInput\r\n        value={state.password}\r\n        name=\"password\"\r\n        onChange={onChangeInput}\r\n      />\r\n\r\n      {(hasName || hasState) && (hasEmail || hasState) && (!!state.password && hasState)\r\n        ? (<div className={styles.buttons} onClick={onCancel} >\r\n          <span className={styles.button}>\r\n            Отмена\r\n          </span>\r\n          <Button type='primary' size='medium'>\r\n            Сохранить\r\n          </Button>\r\n        </div>) : null}\r\n    </form>\r\n  )\r\n};\r\n","import { useEffect } from 'react';\r\nimport {\r\n  useParams,\r\n  useRouteMatch,\r\n} from 'react-router-dom';\r\nimport {\r\n  getOrders,\r\n  getUserOrders,\r\n} from '../../services/actions/order/order';\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from '../../utils/hooks';\r\nimport {\r\n  getBurgerPrice,\r\n  getIngredientsObjWithCount,\r\n  getIngredientsOrder,\r\n  orderDate,\r\n  statusColor,\r\n} from '../../utils/functions';\r\nimport styles from './order.module.css';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nexport const Order = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const isProfile = !!useRouteMatch(\"/profile\");\r\n\r\n  const { number } = useParams<{ number: string }>();\r\n\r\n  useEffect(\r\n    () => {\r\n      dispatch(isProfile\r\n        ? getUserOrders()\r\n        : getOrders()\r\n      )\r\n    },\r\n    [dispatch, isProfile]\r\n  );\r\n\r\n  const { allIngredients } = useSelector((store) => store.ingredients);\r\n\r\n  const { feedOrders } = useSelector((store) => store.order);\r\n\r\n  const item = feedOrders ? feedOrders.find(el => el.number === +number) : null;\r\n\r\n  const st = item ? statusColor(item.status) : null;\r\n\r\n  const date = item && item.createdAt && orderDate(item?.createdAt);\r\n\r\n  const ingredients = item ? getIngredientsOrder(item, allIngredients) : null;\r\n\r\n  const ingredientsSet = Array.from(new Set(ingredients));\r\n\r\n  const objIngredientsWithCount = ingredients && getIngredientsObjWithCount(ingredients);\r\n\r\n  const burgerPrice = ingredients && getBurgerPrice(ingredients);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <span className={`${styles.number_order} text text_type_digits-default`}>#{number}</span>\r\n      <p className={`${styles.title} text text_type_main-medium mb-3 mt-10`}>{item?.name}</p>\r\n      <p className={`text text_type_main-default mb-15 ${styles[`status_color_${st?.textColor}`]}`}>{st?.text}</p>\r\n      <p className={`${styles.title} text text_type_main-medium mb-6`}>Состав:</p>\r\n      <ul className={`${styles.ingredients} mb-10`}>\r\n        {ingredientsSet?.map(el =>\r\n          <li className={`${styles.item} mr-6`} key={uuidv4()}>\r\n            <div className={`${styles.div_image} mr-4`}>\r\n              <img src={objIngredientsWithCount?.item[el._id]?.image_mobile} alt='Ингредиент' className={styles.image} />\r\n            </div>\r\n            <p className={`${styles.ingredient} text text_type_main-default mr-4`}>{objIngredientsWithCount?.item[el._id]?.name}</p>\r\n            <p className=\"text text_type_digits-default mr-1\">{objIngredientsWithCount?.count[el._id]} x {objIngredientsWithCount?.item[el._id]?.price}</p>\r\n            <CurrencyIcon type='primary' />\r\n          </li>)}\r\n      </ul>\r\n      <div className={styles.info}>\r\n        <p className='text text_type_main-default text_color_inactive'>{date}</p>\r\n        <p className={`${styles.element_price} text`}>\r\n          {burgerPrice}\r\n          <CurrencyIcon type='primary' />\r\n        </p>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import styles from './profile.module.css';\r\nimport {\r\n  Switch,\r\n  NavLink,\r\n  Route,\r\n  useLocation,\r\n} from 'react-router-dom';\r\nimport { OrderHistory } from '../../components/order-history/order-history';\r\nimport { FormUser } from '../../components/form-user/form-user';\r\nimport { logout } from '../../services/actions/user/user';\r\nimport { useDispatch } from '../../utils/hooks';\r\nimport { Order } from '../order/order';\r\nimport { FC } from 'react';\r\n\r\nexport const Profile: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { pathname } = useLocation();\r\n  const profileStyles = { margin: '29vh auto 0', justifyContent: 'flex-start' };\r\n  const profileOrdersStyles = { margin: '52px auto 0' };\r\n  const style =\r\n    pathname === '/profile/orders' ? profileOrdersStyles : profileStyles;\r\n\r\n  //нажатие на кнопку Выход\r\n  const onExitClick = () => {\r\n    dispatch(logout());\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container} style={style}>\r\n      <div className={`${styles.links} mr-15`}>\r\n        <NavLink\r\n          to='/profile'\r\n          exact\r\n          className='text text_type_main-medium text_color_inactive'\r\n          activeClassName={styles.linkActive}\r\n          style={{ height: '64px' }}\r\n        >\r\n          Профиль\r\n        </NavLink>\r\n        <NavLink\r\n          to='/profile/orders'\r\n          exact\r\n          className='text text_type_main-medium text_color_inactive'\r\n          activeClassName={styles.linkActive}\r\n          style={{ height: '64px' }}\r\n        >\r\n          История заказов\r\n        </NavLink>\r\n        <NavLink\r\n          to='/login'\r\n          exact\r\n          className='text text_type_main-medium text_color_inactive'\r\n          activeClassName={styles.linkActive}\r\n          onClick={onExitClick}\r\n          style={{ height: '64px' }}\r\n        >\r\n          Выход\r\n        </NavLink>\r\n        <p className={`${styles.p} text text_type_main-default mt-20`}>\r\n          В этом разделе вы можете изменить свои персональные данные\r\n        </p>\r\n      </div>\r\n      <Switch>\r\n        <Route path='/profile' exact>\r\n          <FormUser />\r\n        </Route>\r\n        <Route path='/profile/orders' exact>\r\n          <OrderHistory />\r\n        </Route>\r\n        <Route path='/profile/orders/:number' exact>\r\n          <Order />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n};","import { FC } from 'react';\r\nimport { Route, Redirect, RouteProps, useLocation } from 'react-router-dom';\r\nimport {  useSelector } from '../../utils/hooks';\r\n\r\ntype ProtectedRouteProps = {\r\n  onlyUnAuth?: boolean;\r\n} & RouteProps;\r\n\r\nexport const ProtectedRoute: FC<ProtectedRouteProps> = ({ onlyUnAuth = false, children, ...rest }) => {\r\n\r\n  const { isAuth } = useSelector((store) => store.user);\r\n  const location = useLocation<{ from: Location}>();\r\n\r\n\r\n  if (onlyUnAuth && isAuth) {\r\n    const { from } = location.state || { from: { pathname: \"/\" } };\r\n\r\n    return (\r\n      <Route {...rest}>\r\n        <Redirect to={from} />\r\n      </Route>\r\n    );\r\n  };\r\n\r\n  if (!onlyUnAuth && !isAuth) {\r\n    return (\r\n      <Route {...rest}>\r\n        <Redirect to={{ pathname: \"/login\", state: { from: location } }} />\r\n      </Route>\r\n    );\r\n  };\r\n\r\n  return <Route {...rest}>{children}</Route>;\r\n};\r\n","import {\r\n  useEffect,\r\n  useState,\r\n} from 'react';\r\nimport styles from \"./ingredient-details.module.css\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { TIngredient } from '../../types';\r\nimport { useSelector } from '../../utils/hooks';\r\n\r\nexport const IngredientDetails = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const { allIngredients } = useSelector((store) => store.ingredients);\r\n\r\n  const [burger, setBurger] = useState({\r\n    image: '',\r\n    name: '',\r\n    calories: 0,\r\n    proteins: 0,\r\n    fat: 0,\r\n    carbohydrates: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const item = allIngredients.find((item: TIngredient) => item._id === id);\r\n    if (item) {\r\n      setBurger({\r\n        image: item.image_large,\r\n        name: item.name,\r\n        calories: item.calories,\r\n        proteins: item.proteins,\r\n        fat: item.fat,\r\n        carbohydrates: item.carbohydrates,\r\n      })\r\n    };\r\n  }, [allIngredients]);\r\n\r\n  return (\r\n    <div className={styles.content} >\r\n      <p className=\"text text_type_main-large\">Детали ингредиента</p>\r\n      <div className={`${styles.img} mt-20`}>\r\n        <img src={burger.image} alt='Вкусная булочка' />\r\n      </div>\r\n      <h2 className=\"text text_type_main-large pt-4 pb-8\">{burger.name}</h2>\r\n      <div className={styles.compound}>\r\n        <div className={styles.cal}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Калории, ккал</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{burger.calories}</p>\r\n        </div>\r\n        <div className={styles.cal}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Белки, г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{burger.proteins}</p>\r\n        </div>\r\n        <div className={styles.cal}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Жиры, г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{burger.fat}</p>\r\n        </div>\r\n        <div className={styles.cal}>\r\n          <p className=\"text text_type_main-default text_color_inactive\">Углеводы, г</p>\r\n          <p className=\"text text_type_digits-default text_color_inactive\">{burger.carbohydrates}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { FC } from 'react';\r\nimport styles from './feed-orders-table.module.css';\r\nimport { TOrder } from '../../types';\r\nimport { useSelector } from '../../utils/hooks';\r\n\r\ntype TProps = {\r\n  doneArray: Array<TOrder>,\r\n  pendingArray: Array<TOrder>,\r\n};\r\n\r\nexport const FeedOrdersTable: FC<TProps> = ({ doneArray, pendingArray }) => {\r\n  const { total, totalToday } = useSelector((store) => store.socket);\r\n\r\n  const colorStyle = { color: '#00cccc' };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.table}>\r\n        <div className={styles.list_status}>\r\n          <p className={`text text_type_main-medium mb-6`}>Готовы:</p>\r\n          <ul className={styles.list}>\r\n            {doneArray?.map((item) => <li className={`${styles.li} text text_type_digits-default pt-2 pb-2`} key={item.number} style={colorStyle} >{item.number}</li>)}\r\n          </ul>\r\n        </div>\r\n        <div className={styles.list_status}>\r\n          <p className=\"text text_type_main-medium  mb-6\">В работе:</p>\r\n          <ul className={styles.list}>\r\n            {pendingArray?.map((item) => <li className={`${styles.li} text text_type_digits-default pt-2 pb-2`} key={item.number}>{item.number}</li>)}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <p className=\"text text_type_main-medium pt-15\">Выполнено за все время:</p>\r\n        <p className={`${styles.count} text text_type_digits-large`}>{total}</p>\r\n      </div>\r\n      <div>\r\n        <p className=\"text text_type_main-medium pt-15\">Выполнено за сегодня:</p>\r\n        <p className={`${styles.count} text text_type_digits-large`}>{totalToday}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { TOrders } from \"../../types\";\r\n\r\nexport const SOCKET_CREATE: 'SOCKET_CREATE' = 'SOCKET_CREATE';\r\nexport const SOCKET_SUCCESS: 'SOCKET_SUCCESS' = 'SOCKET_SUCCESS';\r\nexport const SOCKET_ERROR: 'SOCKET_ERROR' = 'SOCKET_ERROR';\r\nexport const SOCKET_CLOSED: 'SOCKET_CLOSED' = 'SOCKET_CLOSED';\r\nexport const SOCKET_CLOSE: 'SOCKET_CLOSE' = 'SOCKET_CLOSE';\r\nexport const SOCKET_GET_MESSAGE: 'SOCKET_GET_MESSAGE' = 'SOCKET_GET_MESSAGE';\r\nexport const SOCKET_SEND_MESSAGE: 'SOCKET_MESSAGE' = 'SOCKET_MESSAGE';\r\n\r\nexport const socketAllActions = {\r\n\tsocketCreate: SOCKET_CREATE,\r\n\tsocketClose: SOCKET_CLOSE,\r\n\tsocketSendMessage: SOCKET_SEND_MESSAGE,\r\n\tonOpen: SOCKET_SUCCESS,\r\n\tonClose: SOCKET_CLOSED,\r\n\tonError: SOCKET_ERROR,\r\n\tonGetMessage: SOCKET_GET_MESSAGE,\r\n};\r\n\r\nexport interface ISocketCreateAction {\r\n  readonly type: typeof SOCKET_CREATE;\r\n}\r\n\r\nexport interface ISocketCloseAction {\r\n  readonly type: typeof SOCKET_CLOSE;\r\n}\r\n\r\nexport interface ISocketSendMessageAction {\r\n  readonly type: typeof SOCKET_SEND_MESSAGE;\r\n}\r\n\r\nexport interface ISocketSuccessAction {\r\n  readonly type: typeof SOCKET_SUCCESS;\r\n  payload: PayloadAction\r\n}\r\n\r\nexport interface ISocketErrorAction {\r\n  readonly type: typeof SOCKET_ERROR;\r\n  payload: PayloadAction\r\n}\r\n\r\nexport interface ISocketClosedAction {\r\n  readonly type: typeof SOCKET_CLOSED;\r\n  payload: PayloadAction\r\n}\r\n\r\nexport interface ISocketGetMessageAction {\r\n  readonly type: typeof SOCKET_GET_MESSAGE;\r\n  payload: TOrders\r\n}\r\n\r\nexport type TSocketActions =\r\n  | ISocketCreateAction\r\n  | ISocketCloseAction\r\n  | ISocketSendMessageAction\r\n  | ISocketSuccessAction\r\n  | ISocketErrorAction\r\n  | ISocketClosedAction\r\n  | ISocketGetMessageAction;\r\n","import { useEffect } from \"react\";\r\nimport { filterOrdersByStatus } from \"../../utils/functions\";\r\nimport { FeedItemCheck } from \"../../components/feed-item-check/feed-item-check\";\r\nimport { FeedOrdersTable } from \"../../components/feed-orders-table/feed-orders-table\";\r\nimport styles from \"./feed.module.css\";\r\nimport {\r\n  Link,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { TOrder } from \"../../types\";\r\nimport {\r\n  SOCKET_CLOSE,\r\n  SOCKET_CREATE,\r\n} from \"../../services/actions/socket-actions\";\r\nimport {\r\n  useDispatch,\r\n  useSelector,\r\n} from \"../../utils/hooks\";\r\n\r\nexport const Feed = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    () => {\r\n      dispatch({ type: SOCKET_CREATE });\r\n      return () => {\r\n        dispatch({ type: SOCKET_CLOSE })\r\n      }\r\n    }, [dispatch]\r\n  );\r\n\r\n  const location = useLocation();\r\n\r\n  const { orders } = useSelector((store) => store.socket);\r\n\r\n  const statusArray = filterOrdersByStatus(orders);\r\n\r\n  const doneArray = statusArray?.done.slice(0, 10);\r\n\r\n  const pendingArray = statusArray?.pending.slice(0, 10);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1 className=\"text text_type_main-large mb-5 mt-7\">Лента заказов</h1>\r\n      <div className={styles.content}>\r\n        <ul className={styles.table}>\r\n          {orders ? orders.map((item: TOrder) => {\r\n            return (\r\n              <Link\r\n                to={{\r\n                  pathname: `/feed/${item.number}`,\r\n                  state: { background: location }\r\n                }}\r\n                key={item.number}\r\n                style={{ color: '#ffffff' }}\r\n              >\r\n                <FeedItemCheck item={item} />\r\n              </Link>\r\n            )\r\n          })\r\n            : <p>Нет заказов</p>}\r\n        </ul>\r\n        <FeedOrdersTable doneArray={doneArray} pendingArray={pendingArray} />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n","export const GET_ITEMS_FAILED: 'GET_ITEMS_FAILED' = 'GET_ITEMS_FAILED';\r\n\r\nexport interface IGetItemsFailedAction {\r\n  readonly type: typeof GET_ITEMS_FAILED;\r\n}\r\n\r\nexport const getItemsFailed = (): IGetItemsFailedAction => {\r\n  return {\r\n    type: GET_ITEMS_FAILED\r\n  }\r\n};\r\n","import { \r\n  TDispatch, \r\n  TThunk,\r\n } from '../../../types';\r\nimport { getProductsRequest } from '../../../utils/api';\r\nimport { getItemsFailed } from './action-creator-ingredients';\r\nimport {\r\n  GET_ITEMS_REQUEST,\r\n  GET_ITEMS_SUCCESS\r\n} from './action-type-ingredients';\r\n\r\nexport const getIngredients: TThunk = () => {\r\n  return function (dispatch: TDispatch) {\r\n    dispatch({\r\n      type: GET_ITEMS_REQUEST\r\n    });\r\n    getProductsRequest()\r\n      .then((res) => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ITEMS_SUCCESS,\r\n            items: res.data\r\n          });\r\n        } else {\r\n          dispatch(getItemsFailed());\r\n        }\r\n      }).catch(err => {\r\n        console.log(err);\r\n        dispatch(getItemsFailed())\r\n      });\r\n  };\r\n};\r\n","import { AppHeader } from '../app-header/app-header';\r\nimport { Main } from '../../pages/main/main';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch,\r\n  useLocation,\r\n} from 'react-router-dom';\r\nimport { Login } from '../../pages/login/login';\r\nimport { Register } from '../../pages/register/register';\r\nimport { ResetPassword } from '../../pages/reset-password/reset-password';\r\nimport { ForgotPassword } from '../../pages/forgot-password/forgot-password';\r\nimport { Profile } from '../../pages/profile/profile';\r\nimport { ProtectedRoute } from '../protected-route/protected-route';\r\nimport { IngredientDetails } from '../ingredient-details/ingredient-details';\r\nimport { Modal } from '../modal/modal';\r\nimport { OrderDetails } from '../order-details/order-details';\r\nimport { useEffect } from 'react';\r\nimport { getUser } from '../../services/actions/user/user';\r\nimport { Feed } from '../../pages/feed/feed';\r\nimport { Order } from '../../pages/order/order';\r\nimport { getIngredients } from '../../services/actions/ingredients/ingredients';\r\nimport { useDispatch } from '../../utils/hooks';\r\n\r\nconst ModalSwitch: React.FC = () => {\r\n  const location = useLocation<{ background: any }>();\r\n  const background = location.state && location.state.background;\r\n  const hasToken = localStorage.getItem('refreshToken');\r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    if (hasToken) {\r\n      dispatch(getUser());\r\n    }\r\n  }, [hasToken, dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <Switch location={background || location}>\r\n        <Route path='/' exact>\r\n          <Main />\r\n        </Route>\r\n        <Route path='/login' exact>\r\n          {' '}\r\n          {/*страница авторизации*/}\r\n          <Login />\r\n        </Route>\r\n        <Route path='/register' exact>\r\n          {' '}\r\n          {/*страница регистрации*/}\r\n          <Register />\r\n        </Route>\r\n        <Route path='/forgot-password' exact>\r\n          {' '}\r\n          {/*страница восстановления пароля*/}\r\n          <ForgotPassword />\r\n        </Route>\r\n        <Route path='/reset-password' exact>\r\n          {' '}\r\n          {/*страница сброса пароля*/}\r\n          <ResetPassword />\r\n        </Route>\r\n        <Route path='/feed' exact>\r\n          {' '}\r\n          {/*страница ленты заказов. Доступен всем пользователям.*/}\r\n          <Feed />\r\n        </Route>\r\n        <Route path='/feed/:number' exact>\r\n          {' '}\r\n          {/*страница заказа в ленте. Доступен всем пользователям.*/}\r\n          <Order />\r\n        </Route>\r\n        <ProtectedRoute path='/profile/orders/:number' exact children={<Order />} />\r\n        <ProtectedRoute path='/profile'>\r\n          {' '}\r\n          {/*страница с настройками профиля*/}\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <Route path='/ingredients/:id' exact>\r\n          {' '}\r\n          {/*страница ингредиента*/}\r\n          <IngredientDetails />\r\n        </Route>\r\n      </Switch>\r\n      {background && (\r\n        <>\r\n          <Route path='/' exact>\r\n            <Modal>\r\n              <OrderDetails />\r\n            </Modal>\r\n          </Route>\r\n          <Route path='/ingredients/:id'>\r\n            <Modal>\r\n              <IngredientDetails />\r\n            </Modal>\r\n          </Route>\r\n          <Route path='/feed/:number'>\r\n            <Modal>\r\n              <Order />\r\n            </Modal>\r\n          </Route>\r\n          <ProtectedRoute path='/profile/orders/:number'>\r\n            <Modal>\r\n              <Order />\r\n            </Modal>\r\n          </ProtectedRoute>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport const App = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredients());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Router basename='/react-burger'>\r\n      <AppHeader />\r\n      <ModalSwitch />\r\n    </Router>\r\n  );\r\n};\r\n","import {\r\n  TBurgerIngredients,\r\n  TIngredient,\r\n} from \"../../types\";\r\n\r\nexport type TStateIngredients = {\r\n  isLoading: boolean,\r\n  hasError: boolean,\r\n  loaded: boolean,\r\n  allIngredients: Array<TIngredient>,\r\n  burgerIngredients: TBurgerIngredients,\r\n};\r\n\r\nexport const stateIngredients: TStateIngredients = {\r\n  isLoading: false,\r\n  hasError: false,\r\n  loaded: false,\r\n  allIngredients: [],\r\n  burgerIngredients: {\r\n    bun: null,\r\n    notBun: [],\r\n    counts: {}\r\n  },\r\n};\r\n","export type TStateModal = {\r\n  visible: boolean,\r\n  callback: null | (() => void),\r\n};\r\n\r\nexport const stateModal: TStateModal = {\r\n  visible: false,\r\n  callback: null,\r\n};\r\n","import {\r\n  TOrder,\r\n  TOrderInfo,\r\n} from \"../../types\";\r\n\r\nexport type TStateOrder = {\r\n  createOrder: null | TOrderInfo,\r\n  currentBurger: null | TOrder,\r\n  orderRequest: boolean,\r\n  orderFailed: boolean,\r\n  ordersLoaded: boolean,\r\n  feedOrders: null | Array<TOrder>,\r\n};\r\n\r\nexport const stateOrder: TStateOrder = {\r\n  createOrder: null,\r\n  currentBurger: null,\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n  ordersLoaded: false,\r\n  feedOrders: null,\r\n};\r\n","export type TStatePassword = {\r\n  forgotPasswordRequest: boolean,\r\n  forgotPasswordFailed: boolean,\r\n\r\n  resetPasswordRequest: boolean,\r\n  resetPasswordFailed: boolean,\r\n};\r\n\r\nexport const statePassword: TStatePassword = {\r\n  forgotPasswordRequest: false,\r\n  forgotPasswordFailed: false,\r\n\r\n  resetPasswordRequest: false,\r\n  resetPasswordFailed: false,\r\n};\r\n","export type TStateUser = {\r\n  user: {\r\n    name: string,\r\n    email: string,\r\n  },\r\n\r\n  isAuth: boolean,\r\n\r\n  isTokenUpdated: boolean,\r\n  tokenUpdateDate: boolean,\r\n\r\n  registerRequest: boolean,\r\n  registerFailed: boolean,\r\n\r\n  loginRequest: boolean,\r\n  loginFailed: boolean,\r\n\r\n  logoutRequest: boolean,\r\n  logoutFailed: boolean,\r\n\r\n  updateUserRequest: boolean,\r\n  updateUserFailed: boolean,\r\n\r\n  getUserRequest: boolean,\r\n  getUserFailed: boolean,\r\n};\r\n\r\nexport const stateUser: TStateUser = {\r\n  user: {\r\n    name: '',\r\n    email: '',\r\n  },\r\n\r\n  isAuth: false,\r\n\r\n  //обновление токена\r\n  isTokenUpdated: false,\r\n  tokenUpdateDate: false,\r\n\r\n  //регистрация\r\n  registerRequest: false,\r\n  registerFailed: false,\r\n\r\n  //вход\r\n  loginRequest: false,\r\n  loginFailed: false,\r\n\r\n  //выход\r\n  logoutRequest: false,\r\n  logoutFailed: false,\r\n\r\n  //изменение данных пользователя\r\n  updateUserRequest: false,\r\n  updateUserFailed: false,\r\n\r\n  //получение данных о пользователе\r\n  getUserRequest: false,\r\n  getUserFailed: false,\r\n};\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { TOrder } from \"../../types\";\r\n\r\nexport type TStateSocket = {\r\n  isConnected: Boolean;\r\n  hasError: PayloadAction | null;\r\n  orders: Array<TOrder>;\r\n  total: number | null;\r\n  totalToday: number | null;\r\n}\r\n\r\nexport const stateSocket: TStateSocket = {\r\n  isConnected: false,\r\n  hasError: null,\r\n  orders: [],\r\n  total: null,\r\n  totalToday: null,\r\n};\r\n","import { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { TOrder } from \"../../types\";\r\n\r\nexport type TStateAuthSocket = {\r\n  isConnected: Boolean;\r\n  hasError: PayloadAction | null;\r\n  orders: Array<TOrder>;\r\n  total: number | null;\r\n  totalToday: number | null;\r\n}\r\n\r\nexport const stateAuthSocket: TStateAuthSocket = {\r\n  isConnected: false,\r\n  hasError: null,\r\n  orders: [],\r\n  total: null,\r\n  totalToday: null,\r\n};\r\n\r\n\r\n","import { combineReducers } from 'redux';\r\nimport { ingredientsReducer } from \"./ingredients\";\r\nimport { modalReducer } from \"./modal\";\r\nimport { orderReducer } from \"./order\";\r\nimport { passwordReducer } from \"./password\";\r\nimport { userReducer } from \"./user\";\r\nimport { SocketReducer } from './socket-reducer';\r\nimport { AuthSocketReducer } from './auth-socket-reducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n  ingredients: ingredientsReducer,\r\n  order: orderReducer,\r\n  modal: modalReducer,\r\n  password: passwordReducer,\r\n  user: userReducer,\r\n  socket: SocketReducer,\r\n  authSocket: AuthSocketReducer,\r\n});\r\n","import {\r\n  stateIngredients,\r\n  TStateIngredients,\r\n} from \"../initial-state/state-ingredients\";\r\nimport {\r\n  GET_ITEMS_REQUEST,\r\n  GET_ITEMS_SUCCESS,\r\n  ADD_ITEM,\r\n  DELETE_ITEM,\r\n  INCREASE_ITEM,\r\n  DECREASE_ITEM,\r\n  UPDATE_CONSTRUCTOR,\r\n  CLEAR_CONSTRUCTOR,\r\n  TIngredientsActions\r\n} from \"../actions/ingredients/action-type-ingredients\";\r\nimport { GET_ITEMS_FAILED } from \"../actions/ingredients/action-creator-ingredients\";\r\n\r\nexport const ingredientsReducer = (state = stateIngredients, action: TIngredientsActions): TStateIngredients => {\r\n  switch (action.type) {\r\n\r\n    case GET_ITEMS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        hasError: false,\r\n      };\r\n    }\r\n\r\n    case GET_ITEMS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        hasError: false,\r\n        allIngredients: action.items,\r\n        isLoading: false,\r\n        loaded: true\r\n      };\r\n    }\r\n\r\n    case GET_ITEMS_FAILED: {\r\n      return {\r\n        ...state,\r\n        hasError: true,\r\n        isLoading: false\r\n      };\r\n    }\r\n\r\n    case ADD_ITEM: {\r\n      if (action.item.type === 'bun') {\r\n        return {\r\n          ...state,\r\n          burgerIngredients: {\r\n            ...state.burgerIngredients,\r\n            bun: action.item, counts: {}\r\n          }\r\n        };\r\n      }\r\n      const newItem = {\r\n        ...action.item,\r\n        productId: action.key\r\n      };\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          ...state.burgerIngredients,\r\n          notBun: [...state.burgerIngredients.notBun, newItem]\r\n        }\r\n      };\r\n    }\r\n\r\n    case DELETE_ITEM: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          ...state.burgerIngredients,\r\n          notBun: [...state.burgerIngredients.notBun].filter((el) => el.productId !== action.id)\r\n        }\r\n      };\r\n    }\r\n\r\n    case INCREASE_ITEM: {\r\n\r\n      if (action.typeItem !== 'bun') {\r\n        return {\r\n          ...state,\r\n          burgerIngredients: {\r\n            ...state.burgerIngredients,\r\n            counts: {\r\n              ...state.burgerIngredients.counts,\r\n              [action.key]: (state.burgerIngredients.counts[action.key] || 0) + 1\r\n            }\r\n          }\r\n        };\r\n      } else return state;\r\n    }\r\n\r\n    case DECREASE_ITEM: {\r\n\r\n      if (action.typeItem !== 'bun') {\r\n        return {\r\n          ...state,\r\n          burgerIngredients: {\r\n            ...state.burgerIngredients,\r\n            counts: {\r\n              ...state.burgerIngredients.counts,\r\n              [action.key]: state.burgerIngredients.counts[action.key] - 1\r\n            }\r\n          }\r\n        };\r\n      } else return state;\r\n    }\r\n\r\n    case UPDATE_CONSTRUCTOR: {\r\n      const notBun = [...state.burgerIngredients.notBun];\r\n      const dragNotBun = notBun[action.dragIndex];\r\n      notBun.splice(action.dragIndex, 1);\r\n      notBun.splice(action.hoverIndex, 0, dragNotBun);\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          ...state.burgerIngredients,\r\n          notBun: notBun\r\n        }\r\n      };\r\n    }\r\n\r\n    case CLEAR_CONSTRUCTOR: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: {\r\n          bun: null,\r\n          notBun: [],\r\n          counts: {}\r\n        }\r\n      }\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import {\r\n  stateOrder,\r\n  TStateOrder,\r\n} from \"../initial-state/state-order\";\r\nimport {\r\n  CREATE_ORDER_REQUEST,\r\n  CREATE_ORDER_SUCCESS,\r\n  GET_ORDERS_REQUEST,\r\n  GET_ORDERS_SUCCESS,\r\n  GET_USER_ORDERS_REQUEST,\r\n  GET_USER_ORDERS_SUCCESS,\r\n  TOrderActions,\r\n} from \"../actions/order/action-type-order\";\r\nimport {\r\n  CREATE_ORDER_FAILED,\r\n  GET_ORDERS_FAILED,\r\n  GET_USER_ORDERS_FAILED,\r\n} from \"../actions/order/action-creator-order\";\r\n\r\nexport const orderReducer = (state = stateOrder, action: TOrderActions): TStateOrder => {\r\n  switch (action.type) {\r\n\r\n    case CREATE_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true,\r\n        orderFailed: false,\r\n      };\r\n    }\r\n\r\n    case CREATE_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderFailed: false,\r\n        createOrder: action.order,\r\n        orderRequest: false,\r\n      };\r\n    }\r\n\r\n    case CREATE_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderFailed: true,\r\n        orderRequest: false,\r\n      };\r\n    }\r\n\r\n    case GET_ORDERS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true,\r\n        orderFailed: false,\r\n        ordersLoaded: false,\r\n      };\r\n    }\r\n    case GET_ORDERS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderFailed: false,\r\n        feedOrders: action.feedOrders,\r\n        orderRequest: false,\r\n        ordersLoaded: true,\r\n      };\r\n    }\r\n    case GET_ORDERS_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderFailed: true,\r\n        orderRequest: false,\r\n      };\r\n    }\r\n\r\n    case GET_USER_ORDERS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true,\r\n        orderFailed: false,\r\n        ordersLoaded: false,\r\n      };\r\n    }\r\n\r\n    case GET_USER_ORDERS_SUCCESS: {\r\n      const data = action.feedOrders ? action.feedOrders : null\r\n      return {\r\n        ...state,\r\n        orderFailed: false,\r\n        feedOrders: data,\r\n        orderRequest: false,\r\n        ordersLoaded: true,\r\n      };\r\n    }\r\n    case GET_USER_ORDERS_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderFailed: true,\r\n        orderRequest: false\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { \r\n  OPEN_MODAL, \r\n  CLOSE_MODAL, \r\n  TModalActions,\r\n } from '../actions/modal/action-type-modal';\r\nimport { \r\n  stateModal, \r\n  TStateModal,\r\n } from '../initial-state/state-modal';\r\n\r\nexport const modalReducer = (state = stateModal, action: TModalActions): TStateModal => {\r\n  switch (action.type) {\r\n\r\n    case OPEN_MODAL: {\r\n      return {\r\n        visible: true,\r\n        callback: action.callback\r\n      };\r\n    }\r\n\r\n    case CLOSE_MODAL: {\r\n      return {\r\n        visible: false,\r\n        callback: null,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  };\r\n};\r\n","import {\r\n  statePassword,\r\n  TStatePassword,\r\n} from \"../initial-state/state-password\";\r\nimport {\r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n\r\n  RESET_PASSWORD_REQUEST,\r\n  RESET_PASSWORD_SUCCESS,\r\n  TPasswordActions,\r\n} from '../actions/password/action-type-password';\r\nimport {\r\n  FORGOT_PASSWORD_FAILED,\r\n  RESET_PASSWORD_FAILED,\r\n} from \"../actions/password/action-creator-password\";\r\n\r\nexport const passwordReducer = (state = statePassword, action: TPasswordActions): TStatePassword => {\r\n  switch (action.type) {\r\n    //восстановление пароля\r\n    case FORGOT_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordRequest: true,\r\n      };\r\n    }\r\n    case FORGOT_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordFailed: false,\r\n        forgotPasswordRequest: false,\r\n      };\r\n    }\r\n    case FORGOT_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        forgotPasswordFailed: true,\r\n        forgotPasswordRequest: false,\r\n      };\r\n    }\r\n    //смена пароля\r\n    case RESET_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        resetPasswordRequest: true,\r\n      };\r\n    }\r\n    case RESET_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        resetPasswordFailed: false,\r\n        resetPasswordRequest: false,\r\n      };\r\n    }\r\n    case RESET_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        resetPasswordFailed: true,\r\n        resetPasswordRequest: false,\r\n\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  stateUser,\r\n  TStateUser,\r\n} from \"../initial-state/state-user\";\r\nimport {\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_SUCCESS,\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  REFRESH_TOKEN_REQUEST,\r\n  REFRESH_TOKEN_SUCCESS,\r\n  UPDATE_USER_REQUEST,\r\n  UPDATE_USER_SUCCESS,\r\n  TUserActions,\r\n} from \"../actions/user/action-type-user\";\r\nimport {\r\n  LOGOUT_FAILED,\r\n  LOGIN_FAILED,\r\n  REGISTER_FAILED,\r\n  GET_USER_FAILED,\r\n  REFRESH_TOKEN_FAILED,\r\n  UPDATE_USER_FAILED,\r\n} from \"../actions/user/action-creator-user\";\r\n\r\nexport const userReducer = (state = stateUser, action: TUserActions): TStateUser => {\r\n  switch (action.type) {\r\n    //регистрация\r\n    case REGISTER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registerRequest: true,\r\n        registerFailed: false,\r\n      };\r\n    }\r\n    case REGISTER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerFailed: false,\r\n        user: action.user,\r\n        isAuth: true,\r\n      };\r\n    }\r\n    case REGISTER_FAILED: {\r\n      return {\r\n        ...state,\r\n        registerRequest: false,\r\n        registerFailed: true,\r\n      };\r\n    }\r\n    //вход\r\n    case LOGIN_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loginRequest: true,\r\n        loginFailed: false,\r\n      };\r\n    }\r\n    case LOGIN_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: false,\r\n        isAuth: true,\r\n        user: {\r\n          name: action.user.name,\r\n          email: action.user.email,\r\n        },\r\n      };\r\n    }\r\n    case LOGIN_FAILED: {\r\n      return {\r\n        ...state,\r\n        loginRequest: false,\r\n        loginFailed: true,\r\n      };\r\n    }\r\n    //выход\r\n    case LOGOUT_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutRequest: true,\r\n        logoutFailed: false,\r\n      };\r\n    }\r\n    case LOGOUT_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        logoutFailed: false,\r\n        logoutRequest: false,\r\n        user: {\r\n          name: '',\r\n          email: '',\r\n        },\r\n        isAuth: false,\r\n      };\r\n    }\r\n    case LOGOUT_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutFailed: true,\r\n        logoutRequest: false,\r\n      };\r\n    }\r\n    //получение данных о пользователе\r\n    case GET_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: true,\r\n        getUserFailed: false,\r\n      };\r\n    }\r\n    case GET_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserFailed: false,\r\n        user: {\r\n          name: action.user.name,\r\n          email: action.user.email,\r\n        },\r\n        isAuth: true,\r\n      };\r\n    }\r\n    case GET_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        getUserRequest: false,\r\n        getUserFailed: true,\r\n      };\r\n    }\r\n    //обновление токена\r\n    case REFRESH_TOKEN_REQUEST: {\r\n      return {\r\n        ...state,\r\n      };\r\n    }\r\n    case REFRESH_TOKEN_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isTokenUpdated: true,\r\n        tokenUpdateDate: true,\r\n        isAuth: true,\r\n      };\r\n    }\r\n    case REFRESH_TOKEN_FAILED: {\r\n      return {\r\n        ...state,\r\n        isTokenUpdated: true,\r\n        tokenUpdateDate: false\r\n      };\r\n    }\r\n    //изменение данных пользователя\r\n    case UPDATE_USER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        updateUserRequest: true,\r\n        updateUserFailed: false,\r\n      };\r\n    }\r\n    case UPDATE_USER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        updateUserFailed: false,\r\n        updateUserRequest: false,\r\n        user: {\r\n          name: action.user.name,\r\n          email: action.user.email,\r\n        },\r\n        isAuth: true,\r\n      };\r\n    }\r\n    case UPDATE_USER_FAILED: {\r\n      return {\r\n        ...state,\r\n        updateUserFailed: true,\r\n        updateUserRequest: false\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  TStateSocket,\r\n  stateSocket,\r\n} from \"../initial-state/state-socket\";\r\nimport { TSocketActions } from '../actions/socket-actions'\r\nimport {\r\n  SOCKET_SUCCESS,\r\n  SOCKET_ERROR,\r\n  SOCKET_CLOSED,\r\n  SOCKET_GET_MESSAGE,\r\n} from \"../actions/socket-actions\";\r\n\r\nexport const SocketReducer = (state = stateSocket, action: TSocketActions): TStateSocket => {\r\n  switch (action.type) {\r\n    case SOCKET_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isConnected: true\r\n      };\r\n\r\n    case SOCKET_ERROR:\r\n      return {\r\n        ...state,\r\n        hasError: action.payload,\r\n        isConnected: false\r\n      };\r\n\r\n    case SOCKET_CLOSED:\r\n      return {\r\n        ...state,\r\n        isConnected: false\r\n      };\r\n\r\n    case SOCKET_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        orders: action.payload.orders,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { \r\n  TStateAuthSocket, \r\n  stateAuthSocket,\r\n } from \"../initial-state/state-auth-socket\"; \r\nimport { TAuthSocketActions } from \"../actions/auth-socket-actions\";\r\nimport { \r\n  AUTH_SOCKET_SUCCESS,\r\n  AUTH_SOCKET_ERROR,\r\n  AUTH_SOCKET_CLOSED,\r\n  AUTH_SOCKET_GET_MESSAGE,\r\n} from \"../actions/auth-socket-actions\";\r\n\r\nexport const AuthSocketReducer = (state = stateAuthSocket, action: TAuthSocketActions): TStateAuthSocket => {\r\n  switch (action.type) {\r\n    case AUTH_SOCKET_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isConnected: true\r\n      };\r\n\r\n    case AUTH_SOCKET_ERROR:\r\n      return {\r\n        ...state,\r\n        hasError: action.payload,\r\n        isConnected: false\r\n      };\r\n\r\n    case AUTH_SOCKET_CLOSED:\r\n      return {\r\n        ...state,\r\n        isConnected: false\r\n      };\r\n\r\n    case AUTH_SOCKET_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        orders: action.payload.orders,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  AnyAction,\r\n  MiddlewareAPI,\r\n} from \"redux\";\r\nimport { getCookie } from \"../utils/functions\";\r\nimport {\r\n  TSocketAllActions,\r\n} from \"../types\";\r\n\r\nexport const socketMiddleware = (\r\n  wsUrl: string, \r\n  socketActions: TSocketAllActions, \r\n  auth: boolean\r\n  ) => (store: MiddlewareAPI) => {\r\n    \r\n  let socket: WebSocket | null = null;\r\n\r\n  let connected = false;\r\n\r\n  return (next: (action: AnyAction) => void) => (action: AnyAction) => {\r\n    const { dispatch } = store;\r\n\r\n    const { type, payload } = action;\r\n\r\n    const {\r\n      socketCreate,\r\n      socketClose,\r\n      socketSendMessage,\r\n      onOpen,\r\n      onClose,\r\n      onError,\r\n      onGetMessage,\r\n    } = socketActions;\r\n\r\n    const token = auth ? getCookie('token') : null;\r\n\r\n    if (type === socketCreate) {\r\n      socket = token\r\n        ? new WebSocket(`${wsUrl}?token=${token}`)\r\n        : new WebSocket(`${wsUrl}`);\r\n    };\r\n\r\n    if (socket) {\r\n      connected = true;\r\n\r\n      socket.onopen = event => {\r\n        dispatch({ type: onOpen, payload: event });\r\n      };\r\n\r\n      socket.onerror = event => {\r\n        dispatch({ type: onError, payload: event });\r\n      };\r\n\r\n      socket.onmessage = event => {\r\n        const { data } = event;\r\n        const parsedData = JSON.parse(data);\r\n        const { success, ...restParsedData } = parsedData;\r\n        dispatch({ type: onGetMessage, payload: restParsedData });\r\n      };\r\n\r\n      socket.onclose = event => {\r\n        dispatch({ type: onClose, payload: event });\r\n        console.log('socket closed with code: ', event.code);\r\n        if (!connected) {\r\n          setTimeout(() => { dispatch({ type: socketCreate }) }, 100)\r\n        };\r\n      };\r\n\r\n      if (socketClose && type === socketClose && socket) {\r\n        socket.close(1000, 'socket closed');\r\n        connected = false;\r\n      };\r\n\r\n      if (socketSendMessage && type === socketSendMessage && socket) {\r\n        const message = token ? { ...payload, token } : { ...payload };\r\n        socket.send(JSON.stringify(message));\r\n      };\r\n    };\r\n\r\n    next(action);\r\n  };\r\n};\r\n","\r\nimport {\r\n\tcompose,\r\n\tcreateStore,\r\n\tapplyMiddleware,\r\n} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport {\r\n\tSOCKET_URL,\r\n\tSOCKET_URL_USER,\r\n} from '../utils/constants';\r\nimport { authSocketAllActions } from './actions/auth-socket-actions';\r\nimport { socketAllActions } from './actions/socket-actions';\r\nimport { rootReducer } from './reducers/root-reducer';\r\nimport { socketMiddleware } from './socketMiddleware';\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\t__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n\t}\r\n}\r\n\r\nexport const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n\tapplyMiddleware(\r\n\t\tthunk,\r\n\t\tsocketMiddleware(SOCKET_URL, socketAllActions, false),\r\n\t\tsocketMiddleware(SOCKET_URL_USER, authSocketAllActions, true)\r\n\t),\r\n);\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { App } from './components/app/app';\r\nimport { store } from \"./services/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order_container__2YwuM\",\"div_image\":\"order_div_image__1JoPd\",\"image\":\"order_image__lRIG-\",\"ingredients\":\"order_ingredients__31YZG\",\"item\":\"order_item__3wM7U\",\"title\":\"order_title__361Ef\",\"ingredient\":\"order_ingredient__xpDJe\",\"status\":\"order_status__21TmK\",\"info\":\"order_info__3njYw\",\"status_color_yellow\":\"order_status_color_yellow__3s0sg\",\"status_color_white\":\"order_status_color_white__1RFNl\",\"status_color_green\":\"order_status_color_green__3bOiY\",\"element_price\":\"order_element_price__1_4Yu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"app-header_content__1lLO-\",\"twoA\":\"app-header_twoA__3FIYZ\",\"firstCont\":\"app-header_firstCont__3Td_X\",\"firstA\":\"app-header_firstA__12rwC\",\"secondCont\":\"app-header_secondCont__3-LHn\",\"secondA\":\"app-header_secondA__1P8NW\",\"logo\":\"app-header_logo__3dCHa\",\"thirdCont\":\"app-header_thirdCont__1_4Uc\",\"thirdA\":\"app-header_thirdA__1vf8v\",\"linkActive\":\"app-header_linkActive__3BMKV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed-orders-table_container__2MPd4\",\"table\":\"feed-orders-table_table__1sYoS\",\"list\":\"feed-orders-table_list__19EGR\",\"li\":\"feed-orders-table_li__N-UTv\",\"count\":\"feed-orders-table_count__13spA\",\"list_status\":\"feed-orders-table_list_status__2VQvI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__26J1I\",\"emptyContainer\":\"burger-constructor_emptyContainer__1TcVq\",\"ingredients\":\"burger-constructor_ingredients__3TpON\",\"active\":\"burger-constructor_active__3iDH7\",\"candrop\":\"burger-constructor_candrop__1ajQP\",\"notBun\":\"burger-constructor_notBun__38mfd\",\"order\":\"burger-constructor_order__3wcAl\",\"bun\":\"burger-constructor_bun__uPo-p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient-details_content__2VKXC\",\"compound\":\"ingredient-details_compound__3j6hs\",\"cal\":\"ingredient-details_cal__103i2\",\"img\":\"ingredient-details_img__Lk3yO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__2wvDc\",\"form\":\"login_form__2qhwV\",\"link_container\":\"login_link_container__1Y0yW\",\"link\":\"login_link__1E4Ye\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile_container__12KRJ\",\"links\":\"profile_links__qfLXO\",\"p\":\"profile_p__3Y0uD\",\"linkActive\":\"profile_linkActive__2vb1t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__2rFvf\",\"container\":\"main_container__29ZsS\",\"hasError\":\"main_hasError__1l32f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__AgQsa\",\"form\":\"register_form__3OMPr\",\"link_container\":\"register_link_container__2c84x\",\"link\":\"register_link__2f-w_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reset-password_container__3WEST\",\"form\":\"reset-password_form__2KJGN\",\"link_container\":\"reset-password_link_container__17_ko\",\"link\":\"reset-password_link__2bfMV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgot-password_container__1t427\",\"form\":\"forgot-password_form__xjiOH\",\"link_container\":\"forgot-password_link_container__2QiaA\",\"link\":\"forgot-password_link__3_fZM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burger-ingredient_card__3MIDq\",\"image\":\"burger-ingredient_image__2594E\",\"price\":\"burger-ingredient_price__1bk4Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form-user_form__bVjqW\",\"buttons\":\"form-user_buttons__3gGCP\",\"button\":\"form-user_button__36qHc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed_container__-BC6J\",\"content\":\"feed_content__15j3O\",\"table\":\"feed_table__FFGYf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__6IgxT\",\"containerIngredients\":\"burger-ingredients_containerIngredients__3Vmlk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-details_content__2kdrY\",\"image\":\"order-details_image__3hjfB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"modal_content__ei3Jx\",\"close\":\"modal_close__2bkuV\"};"],"sourceRoot":""}